(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9654],{25088:function(t,e,n){"use strict";n(67294);var i=n(4e4),r=n.n(i),a=n(85893);e.Z=function(){return(0,a.jsx)("p",{className:r().Loading})}},59128:function(t,e,n){"use strict";n.d(e,{n:function(){return i},p:function(){return r}});n(41539),n(39714);function i(){"undefined"!==typeof window.ualPageviewFire&&window.ualPageviewFire()}function r(t){if("undefined"!==typeof window.ualSearchFire){var e=t?t.toString():"1";window.ualSearchFire({current_page:e})}}},34897:function(t,e,n){"use strict";var i=n(41865),r=(n(67294),n(21915)),a=n(57774),o=n.n(a),s=n(85893);e.Z=function(t){var e=t.onClick;return(0,s.jsx)("div",{className:o().LoadingError,children:(0,s.jsxs)("p",{children:["\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",(0,s.jsxs)("a",{onClick:e.bind(void 0,"resc"),"data-cl-params":(0,r.cl)({_cl_link:"resc"}),children:[(0,s.jsx)(i.t,{size:20,fill:"#444"}),"\u518d\u8aad\u307f\u8fbc\u307f"]})]})})}},14493:function(t,e,n){"use strict";var i=n(59499),r=n(52918),a=n(94184),o=n.n(a),s=(n(67294),n(21915)),l=n(59633),c=n.n(l),u=n(85893);e.Z=function(t){var e,n=t.onClick,a=t.highload,l=t.isLast,d=o()((0,i.Z)({},c().button,!0)),f=o()((e={},(0,i.Z)(e,c().More,!0),(0,i.Z)(e,c().highload,a),(0,i.Z)(e,c().lastComponent,l),e));return(0,u.jsx)("div",{className:f,children:(0,u.jsxs)("a",{className:d,onClick:n.bind(void 0,"more"),"data-cl-params":(0,s.cl)({_cl_link:"more"}),children:[(0,u.jsx)("p",{className:c().text,children:"\u3082\u3063\u3068\u898b\u308b"}),(0,u.jsx)(r.i,{size:16,fill:"#0B62E5"})]})})}},37240:function(t,e,n){"use strict";n(41539),n(12419),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070);var i=n(92777),r=n(82262),a=n(10748),o=n(45959),s=n(63553),l=n(37247),c=n(59499),u=(n(92222),n(67294)),d=n(35047),f=n(28066),h=n.n(f),p=n(85893);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,c.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,l.Z)(t);if(e){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var b=function(t){(0,o.Z)(n,t);var e=g(n);function n(){var t;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),(0,c.Z)((0,a.Z)(t),"initial",!1),(0,c.Z)((0,a.Z)(t),"visibilityAreaChangedHandler",(function(e){var n=e.detail.offset.top&&e.detail.offset.top>0?e.detail.offset.top:0,i=e.detail.offset.bottom&&e.detail.offset.bottom>0?e.detail.offset.bottom:0;t.initial?t.setOffset(n,i):setTimeout((function(){t.setOffset(n,i)}),200)})),(0,c.Z)((0,a.Z)(t),"setOffset",(function(e,n){var i,r,a,o;null!==(i=window.YAHOO)&&void 0!==i&&null!==(r=i.JP)&&void 0!==r&&null!==(a=r.rma)&&void 0!==a&&null!==(o=a.smp)&&void 0!==o&&o.sv?(t.initial=!0,window.YAHOO.JP.rma.smp.sv.setOffset({top:e,bottom:n})):setTimeout((function(){t.setOffset(e,n)}),200)})),t}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){window.addEventListener("yjtopapp.appshell.visibilityAreaChanged",this.visibilityAreaChangedHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("yjtopapp.appshell.visibilityAreaChanged",this.visibilityAreaChangedHandler)}},{key:"render",value:function(){return(0,p.jsx)("div",{className:h().TimelineYda,children:(0,p.jsx)(d.Z,m({},this.props))})}}]),n}(u.Component);e.Z=b},14527:function(t,e,n){"use strict";n.d(e,{Z:function(){return w}});var i=n(2664),r=(n(41539),n(12419),n(59499)),a=n(92777),o=n(82262),s=n(45959),l=n(63553),c=n(37247),u=(n(26699),n(32023),n(47134)),d=n(94184),f=n.n(d),h=n(67294),p=n(86788),v=n(65902),m=n.n(v),g=n(85893);function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var r=(0,c.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.Z)(this,n)}}var x=function(t){(0,s.Z)(n,t);var e=b(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var t,e=this.props,n=e.muteState,i=e.query,a=e.login,o=e.tweet,s=e.tweetSec,l=e.imageMode,c=e.bestTweetLabel,d=e.showViolationReport,h=e.showMuteMenuList,v=f()((t={},(0,r.Z)(t,m().BestTweetContainer,!0),(0,r.Z)(t,"target_modules_viewability",!0),t)),b=n.muteUserIds.includes(o.userId),x=n.directMuteTweetIds.includes(o.id);return b&&!x?null:(0,g.jsxs)("div",{id:s||"bt",className:v,children:[c&&(0,g.jsxs)("div",{className:m().BestTweet,children:[(0,g.jsx)(u._,{size:18,fill:"#444"}),(0,g.jsx)("span",{children:c})]}),(0,g.jsx)(p.ZP,{query:i,login:a,tweet:o,tweetSec:s||"bt",tweetPos:"1",imageMode:l,showPreview:!0,showReplyMention:!0,showQuotedTweetImage:!0,showViolationReport:d,showMuteMenuList:h,boldAction:!0})]})}}]),n}(h.Component),y=x,w=(0,i.$j)((function(t){return{timelineState:t.timelineState,muteState:t.muteState}}))(y)},79654:function(t,e,n){"use strict";n.d(e,{ZP:function(){return Ht}});var i=n(2664),r=n(63101),a=(n(12419),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(69070),n(92777)),o=n(82262),s=n(10748),l=n(45959),c=n(63553),u=n(37247),d=n(59499),f=(n(92222),n(89554),n(41539),n(54747),n(2707),n(39714),n(74916),n(64765),n(26699),n(32023),n(67294)),h=n(25088),p=n(2056),v=(n(9653),n(82772),n(59128)),m=n(34897),g=n(14493),b=n(94184),x=n.n(b),y=n(35047),w=n(35875),j=n.n(w),_=n(85893);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var k=function(t){(0,l.Z)(n,t);var e=C(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var t,e=x()((t={},(0,d.Z)(t,j().TimelineInfeedYda,!0),(0,d.Z)(t,"infeedAds",!0),t));return(0,_.jsx)("div",{className:e,children:(0,_.jsx)(y.Z,O({},this.props))})}}]),n}(f.Component),D=k,M=n(37240),T=n(17673),S=n(21915),L=(n(23157),n(27852),n(11329)),F=n(83253),P=n.n(F);n(47042);function R(t,e){return t.length>e?t.slice(0,e)+"...":t}var N=n(14527),I=n(90116),A=n(50029),B=(n(19601),n(69826),n(34553),n(43290),n(21249),n(65069),n(5212),n(4723),n(87794)),X=n.n(B),E=n(88169),H=n(9253),W=n(46888),Y=n(14195),q=n(75358),z=n(3023),J=n(8081),V=n(14888),U=n(86108),Q=n(4545),K=n(25048),G=n(26383),$=n(73604),tt=n(46208),et=n(43815),nt=n(71849),it=n(72608),rt=n(91206),at=n.n(rt);function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var ct={h:{span:21600,interval:900,chartLabel:"M\u6708D\u65e5 H:mm",filterLabel:"M/D H:mm",tooltipLabel:"H:mm",ticksLabel:"H:mm",axisTickFilter:[":[03]0$"],labelInterval:7200,tickInterval:1800},d:{span:86400,interval:900,chartLabel:"M\u6708D\u65e5 H:mm",filterLabel:"M/D H:mm",tooltipLabel:"H:mm",ticksLabel:"H:mm",axisTickFilter:["[02468]:00$"],labelInterval:21600,tickInterval:7200},w:{span:604800,interval:3600,chartLabel:"M\u6708D\u65e5 H:mm",filterLabel:"M/D H:mm",tooltipLabel:"M/D H:mm",ticksLabel:"M/D",axisTickFilter:[" 0:00$","12:00$"],labelInterval:86400,tickInterval:43200},m:{span:2592e3,interval:86400,chartLabel:"M\u6708D\u65e5 H:mm",filterLabel:"M/D H:mm",tooltipLabel:"M/D H:mm",ticksLabel:"M/D",axisTickFilter:[" 0:00$"],labelInterval:604800,tickInterval:86400}},ut=function(t){(0,l.Z)(n,t);var e=lt(n);function n(t){var i,r,o;(0,a.Z)(this,n),o=e.call(this,t),(0,d.Z)((0,s.Z)(o),"settings",void 0),(0,d.Z)((0,s.Z)(o),"maxLabelProps",void 0),(0,d.Z)((0,s.Z)(o),"loadChartData",function(){var t=(0,A.Z)(X().mark((function t(e,n){var i,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={isTransitionLoading:!0,isTransitionFailed:!1},r={transitionCount:o.state.transitionCount,transitionData:st({},o.state.transitionData),sentimentData:st({},o.state.sentimentData),samplingRate:o.state.samplingRate||void 0},o.setState(i,(0,A.Z)(X().mark((function t(){var i,a,s;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=o.state.samplingRate,t.next=4,(0,it.a)(e,st(st({},n),{},{samplingRate:i}));case 4:(a=t.sent).tweetTransition.head.totalResultsAvailable>=0&&(r.transitionCount=a.tweetTransition.head.totalResultsAvailable,r.transitionData=a.tweetTransition.entry,a.tweetTransition.head.recommendedSamplingRate>0&&(r.samplingRate=a.tweetTransition.head.recommendedSamplingRate)),a.sentimentPieChart&&a.sentimentPieChart.positive&&a.sentimentPieChart.negative?(r.sentimentData=a.sentimentPieChart,r.sentimentData.dataPositive=[{name:"positive",value:a.sentimentPieChart.positive}],r.sentimentData.dataNegative=[{name:"negative",value:a.sentimentPieChart.negative}]):r.sentimentData={shoulRender:!1,positive:0,negative:0,dataPositive:[],dataNegative:[]},s=o.setTransitionState(r.transitionData,r.transitionCount),o.setState(st(st({},r),s),(function(){o.settings.configured=!0,o.setState({isTransitionLoading:!1,isTransitionFailed:!1,isTransitionInitial:!0})})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),o.setState({isTransitionFailed:!0,isTransitionLoading:!1});case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(o),"changeTerm",(function(t){var e=o.props.transition;if(t?o.setState({term:t,hovered:!1}):t=o.state.term,e){o.settings.configured=!1;var n=ct[t],i=n.interval,r=n.span,a=o.props.transition.since,s=o.props.transition.until,l=(new Date).getTime()/1e3,c=st({},e.params);s&&Number(s)<l-r&&(c.until=s,c.sentimentUntil=s);var u=Object.assign(c,{interval:i,span:r,sentimentSince:a,sentimentUntil:s});u.since||delete u.since,u.until||delete u.until,o.loadChartData(e.path,st({},u))}})),(0,d.Z)((0,s.Z)(o),"tickFormat",(function(t){if(o.state.isTransitionLoading)return"";var e=ct[o.state.term],n=e.labelInterval,i=e.ticksLabel;return o.state.ticks&&(t-o.state.ticks[0])%n===0?(0,nt.rI)(new Date(1e3*t),i):""})),(0,d.Z)((0,s.Z)(o),"spanFormat",(function(){var t=o.props.transition,e=t.since,n=t.until;if(e||n)return"\n      ".concat(e&&(0,nt.rI)(new Date(1e3*Number(e)),ct[o.state.term].filterLabel)||"","\n       -\n      ").concat(n&&(0,nt.rI)(new Date(1e3*Number(n)),ct[o.state.term].filterLabel)||"","\n      ")})),(0,d.Z)((0,s.Z)(o),"yAxisTickFormat",(function(){return""})),(0,d.Z)((0,s.Z)(o),"brushTickFormat",(function(){return""})),(0,d.Z)((0,s.Z)(o),"tooltipFormat",(function(t){var e=o.state.term,n=(0,nt.rI)(new Date,"D"),i=(0,nt.rI)(new Date(1e3*t),"D");return("h"===e||"d"===e)&&Number(i)<Number(n)?(0,nt.rI)(new Date(1e3*t),"M/D H:mm"):(0,nt.rI)(new Date(1e3*t),ct[e].tooltipLabel)})),(0,d.Z)((0,s.Z)(o),"renderTooltip",(function(t){if(t.active){var e=o.state,n=e.maxData,i=e.minData,r=o.tooltipFormat(t.label),a=t.payload[0].value,s=t.coordinate.x<50?50-t.coordinate.x:t.viewBox.width-t.coordinate.x-13<20?t.viewBox.width-t.coordinate.x-13:void 0;return(0,_.jsxs)("div",{className:at().customtooltip,children:[r&&(0,_.jsx)("span",{className:at().label,style:{left:s},children:r}),a>=0&&(0,_.jsxs)("p",{className:"".concat(at().count," ").concat(n&&i&&a-i.count>(n.count-i.count)/2&&at().low||at().high),style:{left:s},children:[(0,_.jsx)("span",{className:at().number,children:a.toLocaleString()}),(0,_.jsx)("span",{className:at().unit,children:"\u4ef6"})]})]})}return""})),(0,d.Z)((0,s.Z)(o),"renderRefLineLabelWithoutCount",(function(t,e){var n;if(o.state.hovered||o.state.labelHovered)return"";var i=o.state,r=i.left.refX,a=i.right.refX,s=null===(n=document.querySelector(".recharts-cartesian-grid"))||void 0===n?void 0:n.getBoundingClientRect().width,l=function(){if(s){if(o.state.left.cx<31)return 31-o.state.left.cx;if(s-o.state.right.cx<31)return 31-(s-o.state.right.cx)}return 0}(),c=s?e.viewBox.x<50?44:s-e.viewBox.x-13<20?s:e.viewBox.x:e.viewBox.x;if(o.state.right.cx-o.state.left.cx<62+l&&void 0!==r&&void 0!==a){var u="".concat(o.tooltipFormat(r)," - ").concat(o.tooltipFormat(a));if("left"===t){var f=x()((0,d.Z)({},at().referenceLabel,!0)),h=s&&s-e.viewBox.x-13<20?u.length>18?80:20:0;return u&&(0,_.jsx)(E.x,{x:c-50-h,y:12,fontSize:14,fill:"#666666",className:f,children:u})}return""}var p=o.tooltipFormat(e.value),v=x()((0,d.Z)({},at().referenceLabel,!0));return p&&(0,_.jsx)(E.x,{x:c,y:12,fontSize:12,fill:"#666666",className:v,children:p})})),(0,d.Z)((0,s.Z)(o),"setRefLineLabelProps",(function(t){return o.maxLabelProps=t,""})),(0,d.Z)((0,s.Z)(o),"renderRefLineLabel",(function(){var t,e,n,i=o.maxLabelProps;if(!i)return"";var r=null===(t=document.querySelector(".recharts-cartesian-grid"))||void 0===t?void 0:t.getBoundingClientRect().width,a=r?i.viewBox.x<50?44:r-i.viewBox.x-13<20?r-25:i.viewBox.x:i.viewBox.x,s=o.tooltipFormat(i.value),l=null===(e=o.state.transitionData.find((function(t){return t.from===i.value})))||void 0===e?void 0:e.count,c=o.state,u=c.maxData,f=c.minData,h=x()((n={},(0,d.Z)(n,at().count,!0),(0,d.Z)(n,at().low,l&&u&&f&&l-f.count>(u.count-f.count)/2),(0,d.Z)(n,at().high,l&&u&&f&&l-f.count<=(u.count-f.count)/2),n));return(0,_.jsxs)("div",{onMouseEnter:o.labelMouseEnter,onMouseLeave:o.labelMouseLeave,className:at().referenceLabel,style:{top:i.viewBox.y-25,left:a-40},children:[s&&(0,_.jsx)("div",{style:{position:"relative"},children:s}),l&&(0,_.jsxs)("p",{className:h,style:{position:"relative"},children:[(0,_.jsx)("span",{className:at().number,children:l.toLocaleString()}),(0,_.jsx)("span",{className:at().unit,children:"\u4ef6"})]})]})})),(0,d.Z)((0,s.Z)(o),"resetFilter",(function(){var t=o.state.transitionData.length-1,e={index:0,cx:0*o.settings.delta,refX:void 0,refY:void 0},n={index:t,cx:t*o.settings.delta,refX:void 0,refY:void 0};o.setState({left:Object.assign(st({},o.state.left),e),right:Object.assign(st({},o.state.right),n),areaOpacity:0},o.reloadWithFilter)})),(0,d.Z)((0,s.Z)(o),"reloadWithFilter",(function(){var t=o.props.transition.locationPath,e=o.state.transitionData,n=o.state,i=n.left.refX,r=n.right.refX,a=st({},o.props.transition.params);delete a.crumb,delete a.prof,delete a.rkf,delete a.b,delete a.interval,delete a.span;var s=i||r&&e[0].from,l=r||i&&e[e.length-1].from,c="".concat(t,"?").concat((0,T.stringify)(st(st({},a),{},{since:s,until:l,gm:o.state.term})));location.href=c})),(0,d.Z)((0,s.Z)(o),"clickChart",(function(t){if(null!==t&&void 0!==t&&t.activeLabel){var e=o.state.transitionData,n=e.findIndex((function(e){return e.from===t.activeLabel}));n!==e.length-1&&o.setState({left:Object.assign(st({},o.state.left),{refX:e[n].from}),right:Object.assign(st({},o.state.right),{refX:e[n].to})},o.reloadWithFilter)}})),(0,d.Z)((0,s.Z)(o),"barTouchStart",(function(t,e){o.brushDown(t,e.touches[0].pageX)})),(0,d.Z)((0,s.Z)(o),"barMouseDown",(function(t,e){o.brushDown(t,e.pageX)})),(0,d.Z)((0,s.Z)(o),"brushDown",(function(t,e){var n=st({isDragging:!0,lastIndex:o.state[t].index,slideMoveStartX:e},o.settings.dot.normal);"left"===t?o.setState({left:Object.assign(st({},o.state.left),n)}):"right"===t&&o.setState({right:Object.assign(st({},o.state.right),n)})})),(0,d.Z)((0,s.Z)(o),"barMouseUp",(function(){var t=o.state,e=t.left,n=e.index,i=e.lastIndex,r=t.right,a=r.index,s=r.lastIndex,l=(i!==n||s!==a)&&st({},o.settings.dot.selected)||st({},o.settings.dot.normal),c=(s!==a||i!==n)&&st({},o.settings.dot.selected)||st({},o.settings.dot.normal);o.setState({left:Object.assign(st({},o.state.left),st({isDragging:!1,slideMoveStartX:void 0},l)),right:Object.assign(st({},o.state.right),st({isDragging:!1,slideMoveStartX:void 0},c))},(function(){n===i&&a===s||o.reloadWithFilter()}))})),(0,d.Z)((0,s.Z)(o),"barTouchMove",(function(t){t&&t.targetTouches&&o.brushMove(t.targetTouches[0].pageX)})),(0,d.Z)((0,s.Z)(o),"barMouseMove",(function(t,e){e&&e.pageX&&o.brushMove(e.pageX)})),(0,d.Z)((0,s.Z)(o),"brushMove",(function(t){var e=o.state.left.isDragging?"left":o.state.right.isDragging&&"right";if(e){var n=o.state[e];if(n.isDragging&&void 0!==n.index){var i=n.slideMoveStartX&&t-n.slideMoveStartX||0,r=Math.floor(i/o.settings.delta),a=r*o.settings.delta,s=n.index+r,l=n.cx+a;if(s<0||s>=o.state.transitionData.length||"left"===e&&void 0!==o.state.right.index&&s>=o.state.right.index||"right"===e&&void 0!==o.state.left.index&&s<=o.state.left.index)return;var c=s>=0&&s<=o.state.transitionData.length-1&&o.state.transitionData[s].from>=0?o.state.transitionData[s].from:void 0,u=s>=0&&s<=o.state.transitionData.length-1&&o.state.transitionData[s].count>=0?o.state.transitionData[s].count:void 0;if(Math.abs(a)>0&&s>=0&&l>=0){var d=Object.assign(st({},o.state[e]),{index:s,cx:l,slideMoveStartX:n.slideMoveStartX&&n.slideMoveStartX+a,stroke:n.stroke,fill:n.fill,radius:n.radius,refX:c,refY:u}),f=0===o.state.left.index&&o.state.right.index===o.state.transitionData.length-1?0:1;"left"===e?o.setState({left:d,areaOpacity:f}):"right"===e&&o.setState({right:d,areaOpacity:f})}}}})),(0,d.Z)((0,s.Z)(o),"barMouseOver",(function(t,e,n){null===n||void 0===n||n.stopPropagation(),"left"===t?o.setState({left:Object.assign(st({},o.state.left),{hovered:!0})}):"right"===t&&o.setState({right:Object.assign(st({},o.state.right),{hovered:!0})})})),(0,d.Z)((0,s.Z)(o),"barMouseOut",(function(t){"left"===t?o.setState({left:Object.assign(st({},o.state.left),{hovered:!1})}):"right"===t&&o.setState({right:Object.assign(st({},o.state.right),{hovered:!1})})})),(0,d.Z)((0,s.Z)(o),"rectMouseMove",(function(t){o.barMouseMove(void 0,t)})),(0,d.Z)((0,s.Z)(o),"rectMouseLeave",(function(){})),(0,d.Z)((0,s.Z)(o),"areaMouseEnter",(function(t){!o.state.hovered&&t.isTooltipActive?o.setState({hovered:!0}):o.state.hovered&&!t.isTooltipActive&&o.setState({hovered:!1})})),(0,d.Z)((0,s.Z)(o),"areaMouseLeave",(function(){o.setState({hovered:!1})})),(0,d.Z)((0,s.Z)(o),"labelMouseEnter",(function(){o.state.hovered||o.setState({hovered:!0})})),(0,d.Z)((0,s.Z)(o),"labelMouseLeave",(function(){o.setState({hovered:!1})})),(0,d.Z)((0,s.Z)(o),"getTitleLength",(function(){var t=document.body.clientWidth;return Math.floor(t/12+1)})),(0,d.Z)((0,s.Z)(o),"CustomXAxisTick",(function(t){var e=st({},t);return t.width<t.x&&(e.dx=-5),t.x<15&&(e.dx=5),(0,_.jsx)(E.x,st(st({},e),{},{children:o.tickFormat(t.payload.value)}))}));var l=o.props.transition;return l?(o.settings={chart:{height:202,margin:{top:20,right:14,bottom:0,left:12},top:"dataMax+10",bottom:0,animation:!0},bar:{width:272,x:0,y:193,color:"#20A2F1",offsetX:14},dot:{strokeWidth:2,radius:9,normal:{stroke:"#FFFFFF",fill:"#20A2F1",radius:10},selected:{stroke:"#20A2F1",fill:"#FFFFFF",radius:9}},delta:1,configured:!1},o.state={left:{index:void 0,cx:0,lastIndex:void 0,isDragging:!1,slideMoveStartX:void 0,stroke:"#FFFFFF",fill:o.settings.bar.color,radius:o.settings.dot.radius,refX:void 0,refY:void 0,hovered:!1},right:{index:void 0,cx:0,lastIndex:void 0,isDragging:!1,slideMoveStartX:void 0,stroke:"#FFFFFF",fill:o.settings.bar.color,radius:o.settings.dot.radius,refX:void 0,refY:void 0,hovered:!1},areaOpacity:0,selected:!1,startIndex:0,endIndex:10,fill:"#F7F7F7",term:l.gm,maxData:void 0,minData:void 0,hovered:!1,totalCount:null===(i=o.props.timeline)||void 0===i||null===(r=i.head)||void 0===r?void 0:r.totalResultsAvailable,isTransitionLoading:!1,isTransitionFailed:!1,isTransitionInitial:!1,transitionCount:0,transitionData:[],sentimentData:{shoulRender:!1,positive:0,negative:0,dataPositive:[],dataNegative:[]},samplingRate:o.props.transition.params.samplingRate||void 0},o):(0,c.Z)(o)}return(0,o.Z)(n,[{key:"setTransitionState",value:function(t,e){var n,i,r=this,a=function(){var t=r.props.transition,e=t.since,n=t.until;return{since:e?Number(e):0,until:n?Number(n):0}}(),o=a.since,s=a.until,l=t.findIndex((function(t){return"w"===r.state.term?t.from===(0,nt.dO)(new Date(1e3*Number(o)),36e5)/1e3:"m"===r.state.term?t.from===((0,nt.dO)(new Date(1e3*Number(o)),864e5)- -54e6)/1e3:t.from===o})),c=t.findIndex((function(t){return"w"===r.state.term?t.from===(0,nt.NG)(new Date(1e3*Number(s)),36e5)/1e3:"m"===r.state.term?t.from===((0,nt.NG)(new Date(1e3*Number(s)),864e5)-324e5)/1e3:t.from===s}));this.settings.delta=this.settings.bar.width/(t.length-1);var u=-1!==l&&l||0,d=-1!==c&&c||t.length-1,f=-1===l&&-1===c?0:1,h=-1!==l&&st({},this.settings.dot.selected)||st({},this.settings.dot.normal),p=-1!==c&&st({},this.settings.dot.selected)||st({},this.settings.dot.normal),v=function(){var e=(0,I.Z)(t).reverse().filter((function(t){var e=(0,nt.rI)(new Date(1e3*t.from),ct[r.state.term].tooltipLabel);return ct[r.state.term].axisTickFilter.some((function(t){return e.match(t)}))})).map((function(t){return t.from})),n=ct[r.state.term].tickInterval;return e.filter((function(t){return(t-e[0])%n===0}))}();return{maxData:(0,I.Z)(t).sort((function(t,e){return e.count-t.count}))[0],minData:(0,I.Z)(t).sort((function(t,e){return t.count-e.count}))[0],totalCount:0!==o&&0!==s?null===(n=this.props.timeline)||void 0===n||null===(i=n.head)||void 0===i?void 0:i.totalResultsAvailable:e,left:st(st({index:u,lastIndex:u,cx:u&&u*this.settings.delta||0,isDragging:!1,slideMoveStartX:void 0},h),{},{refX:-1!==l&&t[l].from>=0?t[l].from:void 0,refY:-1!==l&&t[l].count>=0?t[l].count:void 0}),right:st(st({index:d,cx:d&&d*this.settings.delta||this.settings.bar.width,lastIndex:d,isDragging:!1,slideMoveStartX:void 0},p),{},{refX:-1!==c&&t[c].from>=0?t[c].from:void 0,refY:-1!==c&&t[c].count>=0?t[c].count:void 0}),areaOpacity:f,ticks:v}}},{key:"componentDidMount",value:function(){this.changeTerm()}},{key:"render",value:function(){var t,e,n=this.props.transition,i=n.since,r=n.until,a=this.state,o=this.state,s=o.left,l=o.right,c=o.areaOpacity,u=o.maxData,d=o.term,f=o.hovered,p=o.labelHovered,v=o.totalCount,m=o.ticks,g=o.tooltipX,b=this.settings.dot.strokeWidth,x=s.index&&s.index/(a.transitionData.length-1)*100||0,y=l.index&&l.index/(a.transitionData.length-1)*100||100,w=Math.floor(90+3.6*a.sentimentData.positive),j=Math.floor(90-3.6*a.sentimentData.negative);return!a.isTransitionInitial&&(0,_.jsx)(h.Z,{})||a.transitionData&&a.transitionData.length>0&&(0,_.jsx)("div",{className:at().Chart,children:(0,_.jsxs)("div",{className:at().panel,children:[(0,_.jsx)("div",{className:at().spanTab,children:(0,_.jsxs)("ul",{children:[(0,_.jsx)("li",{onClick:this.changeTerm.bind(this,"h"),children:(0,_.jsx)("em",{className:"h"===d&&at().selected||"",children:"6\u6642\u9593"})}),(0,_.jsx)("li",{onClick:this.changeTerm.bind(this,"d"),children:(0,_.jsx)("em",{className:"d"===d&&at().selected||"",children:"24\u6642\u9593"})}),(0,_.jsx)("li",{onClick:this.changeTerm.bind(this,"w"),children:(0,_.jsx)("em",{className:"w"===d&&at().selected||"",children:"7\u65e5"})}),(0,_.jsx)("li",{onClick:this.changeTerm.bind(this,"m"),children:(0,_.jsx)("em",{className:"m"===d&&at().selected||"",children:"30\u65e5"})})]})}),(i||r)&&(0,_.jsx)("div",{className:at().term,children:(0,_.jsx)("p",{children:this.spanFormat()})}),(0,_.jsx)("div",{className:at().totalCount,children:(0,_.jsxs)("p",{children:[(0,_.jsx)("span",{children:v&&v.toLocaleString()||0}),"\u4ef6\u306e\u30dd\u30b9\u30c8"]})}),(0,_.jsxs)("div",{className:at().transition,children:[!a.isTransitionFailed&&a.transitionData.length>0&&(0,_.jsx)(H.h,{width:"100%",children:(0,_.jsxs)(W.T,st(st({},st(st({},this.settings.chart),{},{data:a.transitionData})),{},{onMouseMove:this.areaMouseEnter,onMouseLeave:this.areaMouseLeave,children:[(0,_.jsx)(Y.q,{stroke:"#F7F7F7",fill:"#F7F7F7"}),(0,_.jsx)(q.B,{dataKey:"count",domain:[function(t){return.8*t},function(t){return 1.2*t}],tickFormatter:this.yAxisTickFormat,axisLine:{stroke:"#DDDDDD"},tickSize:0,width:1}),(0,_.jsx)(z.K,{dataKey:"from",domain:["dataMin","dataMax"],tickFormatter:this.tickFormat,tick:this.CustomXAxisTick,tickSize:4,tickLine:{stroke:"#DDDDDD"},axisLine:{stroke:"#DDDDDD",strokeWidth:"1"},height:25,interval:0,ticks:m,dy:5}),s.refX&&(0,_.jsx)(J.z,{className:"recharts-refarea",fillOpacity:.8,x1:a.transitionData[0].from,x2:s.refX,fill:"#eaeaea"}),l.refX&&(0,_.jsx)(J.z,{fillOpacity:.8,isFront:!1,x1:l.refX,x2:a.transitionData[a.transitionData.length-1].from,fill:"#eaeaea"}),(0,_.jsx)(V.u,{isAnimationActive:!1,offset:-35,position:{x:g,y:-3},cursor:{stroke:"#999999",strokeDasharray:"2 2"},content:this.renderTooltip,allowEscapeViewBox:{x:!0},wrapperStyle:{outline:"none"}}),(0,_.jsxs)("defs",{children:[(0,_.jsxs)("linearGradient",{id:"countLine",x1:"0%",y1:"0",x2:"100%",y2:"0",children:[(0,_.jsx)("stop",{offset:"0%",stopColor:"#ccc"}),(0,_.jsx)("stop",{offset:"".concat(x,"%"),stopColor:"#ccc"}),(0,_.jsx)("stop",{offset:"".concat(x,"%"),stopColor:"#20A2F1"}),(0,_.jsx)("stop",{offset:"".concat(y,"%"),stopColor:"#20A2F1"}),(0,_.jsx)("stop",{offset:"".concat(y,"%"),stopColor:"#ccc"}),(0,_.jsx)("stop",{offset:"100%",stopColor:"#ccc"})]}),(0,_.jsxs)("linearGradient",{id:"countArea",x1:"0%",y1:"0",x2:"100%",y2:"0",children:[(0,_.jsx)("stop",{offset:"0%",stopColor:"rgba(234,234,234,0.2)"}),(0,_.jsx)("stop",{offset:"".concat(x,"%"),stopColor:"rgba(234,234,234,0.2)"}),(0,_.jsx)("stop",{offset:"".concat(x,"%"),stopColor:"rgba(29,161,242,0.2)"}),(0,_.jsx)("stop",{offset:"".concat(y,"%"),stopColor:"rgba(29,161,242,0.2)"}),(0,_.jsx)("stop",{offset:"".concat(y,"%"),stopColor:"rgba(234,234,234,0.2)"}),(0,_.jsx)("stop",{offset:"100%",stopColor:"rgba(234,234,234,0.2)"})]})]}),(0,_.jsx)(U.u,{className:at().chart,dataKey:"count",stroke:"url(#countLine)",fill:"url(#countArea)",fillOpacity:c,strokeWidth:"2",type:"monotoneX",dot:!1,activeDot:{fill:"#20A2F1",stroke:"#FFFFFF",strokeWidth:2,r:5,z:1e3},isAnimationActive:!0,animationDuration:500}),s.refX&&(0,_.jsx)(Q.d,{x:s.refX,stroke:"#999",strokeDasharray:"2 2",children:(0,_.jsx)(K._,{content:this.renderRefLineLabelWithoutCount.bind(this,"left"),value:s.refX,position:"centerTop"})}),s.refX&&(0,_.jsx)(G.q,{x:s.refX,y:s.refY,r:s.radius/2,stroke:s.stroke,fill:s.fill,strokeWidth:b}),l.refX&&(0,_.jsx)(Q.d,{x:l.refX,stroke:"#999",strokeDasharray:"2 2",children:(0,_.jsx)(K._,{content:this.renderRefLineLabelWithoutCount.bind(this,"right"),value:l.refX,position:"centerTop"})}),l.refX&&(0,_.jsx)(G.q,{x:l.refX,y:l.refY,r:s.radius/2,stroke:s.stroke,fill:s.fill,strokeWidth:b}),!i&&!r&&!s.isDragging&&!s.refX&&!l.isDragging&&!l.refX&&!f&&!p&&u&&u.count>0&&(0,_.jsx)(Q.d,{x:u.from,stroke:"#999",strokeDasharray:"2 2",children:(0,_.jsx)(K._,{content:this.setRefLineLabelProps,value:u.from,position:"centerTop"})}),!i&&!r&&!s.isDragging&&!s.refX&&!l.isDragging&&!l.refX&&!f&&!p&&u&&u.count>0&&(0,_.jsx)(G.q,{x:u.from,y:u.count,fill:"#20A2F1",stroke:"#FFFFFF",strokeWidth:2,r:5})]}))}),!i&&!r&&!s.isDragging&&!s.refX&&!l.isDragging&&!l.refX&&!f&&!p&&u&&u.count>0&&this.renderRefLineLabel()]}),(0,_.jsx)("div",{className:at().sentiment,children:!a.isTransitionFailed&&!a.isTransitionLoading&&(0,_.jsxs)("ul",{children:[(0,_.jsxs)("li",{className:at().positive,children:[(0,_.jsxs)("span",{className:at().label,children:[(0,_.jsx)("p",{className:at().faceIcon}),(0,_.jsx)("em",{children:"\u30dd\u30b8\u30c6\u30a3\u30d6"})]}),(0,_.jsxs)("span",{className:at().percentage,children:[(0,_.jsx)("em",{className:at().number,children:(null===(t=a.sentimentData)||void 0===t?void 0:t.positive)||"-   "}),"%"]})]}),(0,_.jsx)("li",{className:at().center,children:a.sentimentData.dataPositive.length>0&&a.sentimentData.dataNegative.length>0&&(0,_.jsx)(H.h,{width:"100%",children:(0,_.jsxs)($.u,{className:at().chart,width:91,height:120,children:[(0,_.jsx)(tt.b,{data:a.sentimentData.dataPositive,label:!1,labelLine:!1,isAnimationActive:!0,animationDuration:500,dataKey:"value",cx:"49%",cy:"49%",startAngle:90,endAngle:w,outerRadius:41,children:(0,_.jsx)(et.b,{fill:"#DFF2D5"},"cell-0")}),(0,_.jsx)(tt.b,{data:a.sentimentData.dataNegative,label:!1,labelLine:!1,isAnimationActive:!0,animationDuration:500,dataKey:"value",cx:"49%",cy:"49%",startAngle:90,endAngle:j,outerRadius:41,children:(0,_.jsx)(et.b,{fill:"#F9E3E3"},"cell-0")}),(0,_.jsx)(tt.b,{data:a.sentimentData.dataPositive,label:!1,labelLine:!1,isAnimationActive:!0,animationDuration:500,dataKey:"value",cx:"49%",cy:"49%",startAngle:90,endAngle:w,innerRadius:41,outerRadius:45,children:(0,_.jsx)(et.b,{fill:"#36bd17"},"cell-0")}),(0,_.jsx)(tt.b,{data:a.sentimentData.dataNegative,label:!1,labelLine:!1,isAnimationActive:!0,animationDuration:500,dataKey:"value",cx:"49%",cy:"49%",startAngle:90,endAngle:j,innerRadius:41,outerRadius:45,children:(0,_.jsx)(et.b,{fill:"#DB444B"},"cell-1")})]})})||(0,_.jsxs)("svg",{width:"82",height:"82",children:[(0,_.jsx)("circle",{cx:"50%",cy:"50%",r:"39",strokeWidth:"3",stroke:"#DDDDDD",fill:"#F8F8F8"}),(0,_.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",fill:"#444444",fontSize:"12",children:"\u5224\u5b9a\u306a\u3057"})]})}),(0,_.jsxs)("li",{className:at().negative,children:[(0,_.jsxs)("span",{className:at().label,children:[(0,_.jsx)("em",{children:"\u30cd\u30ac\u30c6\u30a3\u30d6"}),(0,_.jsx)("p",{className:at().faceIcon})]}),(0,_.jsxs)("span",{className:at().percentage,children:[(0,_.jsx)("em",{className:at().number,children:(null===(e=a.sentimentData)||void 0===e?void 0:e.negative)||"-   "}),"%"]})]})]})})]})})}}]),n}(f.Component),dt=ut,ft=n(87276),ht=n.n(ft);function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var gt={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0)",zIndex:5000001}},bt=function(t){(0,l.Z)(n,t);var e=mt(n);function n(t){var i;return(0,a.Z)(this,n),i=e.call(this,t),(0,d.Z)((0,s.Z)(i),"openModal",(function(){document.body.setAttribute("style","overflow: hidden;")})),(0,d.Z)((0,s.Z)(i),"afterOpenModal",(function(){i.setState({modalOpen:!0}),p.J3.isTargetModule("grfbt")?(p.J3.removeModule("grfbt"),p.J3.addModules("grfbt")):p.J3.addModules("grfbt")})),(0,d.Z)((0,s.Z)(i),"closeModalWithState",(function(){i.closeModal()})),(0,d.Z)((0,s.Z)(i),"closeModal",(function(){setTimeout((function(){i.props.onClose(),history.go(-1)}),400),document.body.removeAttribute("style"),document.body.classList.remove("modal-open"),i.setState({close:!0},(function(){}))})),(0,d.Z)((0,s.Z)(i),"getTitleLength",(function(){var t=document.body.clientWidth;return Math.floor(t/12+1)})),P().setAppElement("#wrapper"),i.state={modalOpen:!1,customStyle:gt,close:!1},i.renderBestTweet=i.renderBestTweet.bind((0,s.Z)(i)),i.closeModal=i.closeModal.bind((0,s.Z)(i)),i.pushHistory=i.pushHistory.bind((0,s.Z)(i)),i}return(0,o.Z)(n,[{key:"replaceHistory",value:function(){var t=this.props.transition,e=vt({},null===t||void 0===t?void 0:t.locationQuery);delete e.chart;var n=(null===t||void 0===t?void 0:t.locationPath)+"?"+(0,T.stringify)(e);history.replaceState("ChartLink","",n)}},{key:"pushHistory",value:function(){var t=this.props.transition,e=vt(vt({},null===t||void 0===t?void 0:t.locationQuery),{},{chart:1}),n=(null===t||void 0===t?void 0:t.locationPath)+"?"+(0,T.stringify)(e);history.pushState(null,"",n)}},{key:"componentDidMount",value:function(){var t=this;this.replaceHistory(),this.pushHistory(),this.openModal(),setTimeout((function(){var e={overlay:vt(vt({},t.state.customStyle.overlay),{},{overflow:"auto"})};t.setState({customStyle:e})}),800)}},{key:"componentWillUnmount",value:function(){document.body.removeAttribute("style"),document.body.classList.remove("modal-open")}},{key:"renderBestTweet",value:function(t){var e,n=this.props,i=n.bestTweet,r=n.query,a=n.login,o=x()((e={},(0,d.Z)(e,ht().btWrapper,!0),(0,d.Z)(e,ht().below,!t),e));return i&&(0,_.jsxs)("div",{className:o,children:[!t&&(0,_.jsx)("div",{className:ht().spacer}),(0,_.jsx)(N.Z,{query:r,login:a,tweet:i,tweetSec:"grfbt",bestTweetLabel:"\u30d9\u30b9\u30c8\u30dd\u30b9\u30c8"}),t&&(0,_.jsx)("div",{className:ht().spacer})]})}},{key:"render",value:function(){var t,e,n,i,r=this,a=this.props,o=a.transition,s=a.timeline,l=a.bestTweet,c=a.belowBt,u=this.state.modalOpen,f=!c&&(null===o||void 0===o||null===(t=o.fr)||void 0===t?void 0:t.startsWith("rts"))&&(null===o||void 0===o||null===(e=o.fr)||void 0===e?void 0:e.endsWith("emo"))||!1,h=x()((n={},(0,d.Z)(n,ht().ChartModal,!0),(0,d.Z)(n,ht().close,this.state.close),(0,d.Z)(n,ht().below,!f),n)),p=function(){var t=(null===o||void 0===o?void 0:o.title)&&u&&R(o.title,r.getTitleLength());return t?f?t:"".concat(t,"\u306e\u30dd\u30b9\u30c8\u6570\u30b0\u30e9\u30d5"):"\u30dd\u30b9\u30c8\u6570\u30b0\u30e9\u30d5"}(),v=x()((i={},(0,d.Z)(i,ht().chartArea,!0),(0,d.Z)(i,"target_modules_viewability",!0),i));return(0,_.jsx)(P(),{className:h,shouldCloseOnOverlayClick:!1,onAfterOpen:this.afterOpenModal,isOpen:!0,style:this.state.customStyle,id:"chartModal",children:(0,_.jsxs)("div",{id:"grfbt",className:v,children:[(0,_.jsxs)("div",{className:ht().Header,children:[(0,_.jsx)("p",{className:ht().title,children:p}),(0,_.jsx)("p",{className:ht().closeModal,onClick:this.closeModalWithState,children:(0,_.jsx)("a",{"data-cl-params":(0,S.cl)({_cl_vmodule:"btn",_cl_link:"close"}),children:(0,_.jsx)(L.b,{size:28,fill:"#666666"})})})]}),f&&l&&this.renderBestTweet(!0),o&&(0,_.jsx)(dt,{transition:o,timeline:s}),!f&&l&&this.renderBestTweet(!1)]})})}}]),n}(f.Component),xt=n(75340),yt=n.n(xt);function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function jt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var _t=function(t){(0,l.Z)(n,t);var e=jt(n);function n(t){var i,r;return(0,a.Z)(this,n),(r=e.call(this,t)).onClick=r.onClick.bind((0,s.Z)(r)),r.onClose=r.onClose.bind((0,s.Z)(r)),r.onPopState=r.onPopState.bind((0,s.Z)(r)),r.state={isVisible:(null===(i=t.transition)||void 0===i?void 0:i.showChart)||!1,belowBt:!1},r}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.onPopState)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.onPopState)}},{key:"onPopState",value:function(t){"ChartLink"===t.state&&this.onClose()}},{key:"onClick",value:function(t){var e,n,i,r;t.preventDefault(),this.setState({isVisible:!0,belowBt:!0}),null!==(e=YAHOO)&&void 0!==e&&null!==(n=e.JP)&&void 0!==n&&null!==(i=n.rma)&&void 0!==i&&null!==(r=i.smp)&&void 0!==r&&r.sv&&YAHOO.JP.rma.smp.sv.pause()}},{key:"onClose",value:function(){var t,e,n,i;this.setState({isVisible:!1});var r=this.props.transition,a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},null===r||void 0===r?void 0:r.locationQuery);delete a.chart;var o=(null===r||void 0===r?void 0:r.locationPath)+"?"+(0,T.stringify)(a);history.replaceState(null,"",o),null!==(t=YAHOO)&&void 0!==t&&null!==(e=t.JP)&&void 0!==e&&null!==(n=e.rma)&&void 0!==n&&null!==(i=n.smp)&&void 0!==i&&i.sv&&YAHOO.JP.rma.smp.sv.play()}},{key:"render",value:function(){var t=this.props,e=t.query,n=t.login,i=t.transition,r=t.timeline,a=t.bestTweet,o=this.state,s=o.isVisible,l=o.belowBt;return(0,_.jsxs)("div",{className:yt().ChartLink,children:[(0,_.jsx)("p",{onClick:this.onClick,children:(0,_.jsxs)("a",{"data-cl-params":(0,S.cl)({_cl_vmodule:"graph",_cl_link:"text"}),children:[(0,_.jsx)("span",{className:yt().chartIcon}),"\u5206\u6790\u30b0\u30e9\u30d5\u3092\u898b\u308b"]})}),s&&(0,_.jsx)(bt,{timeline:r,transition:i,query:e,login:n,bestTweet:a,belowBt:l,onClose:this.onClose})]})}}]),n}(f.Component),Zt=_t,Ot=n(87543),Ct=n.n(Ot);function kt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var Dt=function(t){(0,l.Z)(n,t);var e=kt(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var t,e=this.props,n=e.text,i=void 0===n?"":n,r=e.url,a=e.isVideoTlAvailable,o=x()((t={},(0,d.Z)(t,Ct().TLLink,!0),(0,d.Z)(t,"target_modules_viewability",!0),t)),s=a?"\u753b\u50cf\u3092\u898b\u308b":"\u753b\u50cf\u30fb\u52d5\u753b\u3092\u898b\u308b";return(0,_.jsx)("div",{id:"twlink",className:o,children:(0,_.jsxs)("a",{href:r,"data-cl-params":(0,S.cl)({_cl_vmodule:"twlink",_cl_link:"imglink"}),children:[i&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("em",{children:R(i,7)}),"\u306e",s]}),!i&&s]})})}}]),n}(f.Component),Mt=Dt,Tt=n(86788),St=n(35225),Lt=n.n(St);function Ft(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var Pt=function(t){(0,l.Z)(n,t);var e=Ft(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,_.jsx)("article",{className:Lt().W2ARailway,children:(0,_.jsx)("a",{href:"https://app.adjust.com/7u52k1u",children:(0,_.jsx)("img",{src:"https://s.yimg.jp/images/serp/ts/banner/10min/transit/transit01.png",alt:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u691c\u7d22\u516c\u5f0f\u30a2\u30d7\u30ea",width:"320"})})})}}]),n}(f.Component),Rt=Pt,Nt=n(28471),It=n.n(Nt);function At(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.Z)(t);if(e){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var Et=function(t){(0,l.Z)(n,t);var e=Xt(n);function n(t){var i;(0,a.Z)(this,n),i=e.call(this,t),(0,d.Z)((0,s.Z)(i),"pageCount",void 0),(0,d.Z)((0,s.Z)(i),"showInfeedYads",void 0),(0,d.Z)((0,s.Z)(i),"tweetRef",void 0);var r=t.timeline,o=t.timelineSettings,l=t.setIsLast,c=t.setOldestTweetId,u=t.setUseOffsetTimeline;return i.onClick=i.onClick.bind((0,s.Z)(i)),i.onScroll=i.onScroll.bind((0,s.Z)(i)),i.setTweetCallback=i.setTweetCallback.bind((0,s.Z)(i)),i.pageCount=0,i.tweetRef=f.createRef(),c(o.oldestTweetId),r.head.totalResultsAvailable===r.head.totalResultsReturned&&l(!0),o.useOffsetTimeline&&u(!0),i.showInfeedYads=function(t,e){var n=0;for(var i in e.insertModules){var r=Number(i);-1!==e.insertModules[i].indexOf("infeedYads")&&n<r&&(n=r)}var a=e.hasBestTweet?t.head.totalResultsAvailable-1:t.head.totalResultsAvailable;return!(0===n||a<n)}(r,o),i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t,e;(window.addEventListener("scroll",this.onScroll),document.body.addEventListener("touchmove",this.onScroll),p.J3.isTargetModule(null!==(t=this.props.tweetSec)&&void 0!==t?t:"sr"))||p.J3.addModulesWithViewability(null!==(e=this.props.tweetSec)&&void 0!==e?e:"sr")}},{key:"componentWillUnmount",value:function(){var t;window.removeEventListener("scroll",this.onScroll),document.body.removeEventListener("touchmove",this.onScroll),p.J3.removeModule(null!==(t=this.props.tweetSec)&&void 0!==t?t:"sr")}},{key:"renderInsertModule",value:function(t,e){var n=this.props,i=n.query,r=n.login,a=n.bestTweet,o=n.timeline,s=n.timelineSettings,l=n.transition,c=n.yads,u=n.tlLink,d="".concat(t).concat(e);if("yads"===t&&null!==c&&void 0!==c&&c.timeline)return(0,_.jsx)(f.Fragment,{children:(0,_.jsx)(M.Z,{yadsItem:c.timeline,id:d})},d);if(this.showInfeedYads&&"infeedYads"===t&&null!==c&&void 0!==c&&c.timelineInfeed)return(0,_.jsx)(f.Fragment,{children:(0,_.jsx)(D,{yadsItem:c.timelineInfeed,id:d,infeed:!0})},d);if("chartLink"===t&&l)return(0,_.jsx)(f.Fragment,{children:(0,_.jsx)(Zt,{transition:l,timeline:o,query:i,login:r,bestTweet:a})},d);if("imageLink"===t&&u){if(s.imageMode||s.videoMode)return null;var h=u.noQuery?"":u.text?u.text:i;return(0,_.jsx)(f.Fragment,{children:(0,_.jsx)(Mt,Bt({},Bt(Bt({},u),{},{text:h})))},d)}return"w2aRailway"===t?(0,_.jsx)(f.Fragment,{children:(0,_.jsx)(Rt,{})},d):null}},{key:"buildTimeline",value:function(){var t=this,e=this.props,n=e.timeline,i=e.timelineSettings,r=e.paginationState,a=[],o=n.entry.concat(r.tweet);return i.hasBestTweet&&i.insertModules[0]&&i.insertModules[0].forEach((function(e){var n=t.renderInsertModule(e,0);n&&a.push(n)})),o.forEach((function(e,n){a.push(t.renderTimelineTweet(e,n));var r=i.hasBestTweet?n+1:n;i.insertModules[r]&&i.insertModules[r].forEach((function(e){var n=t.renderInsertModule(e,r);n&&a.push(n)}))})),a}},{key:"onClick",value:function(){var t=this.props,e=t.timeline,n=t.timelineSettings,i=t.pagination,r=t.sort,a=t.paginationState,o=t.setTweet;if(i){var s=n.useOffsetTimeline||"h"===(null===r||void 0===r?void 0:r.type);o(i.path,Bt(Bt({},i.params),{},{oldestTweetId:s?void 0:a.oldestTweetId,start:s?(e.entry.length+a.tweet.length).toString():void 0,b:++this.pageCount}),this.setTweetCallback)}}},{key:"onScroll",value:function(){var t=this.props,e=t.timeline,n=t.timelineSettings,i=t.pagination,r=t.sort,a=t.paginationState,o=t.setTweet;if(i&&(this.tweetRef.current&&!a.isLast&&this.tweetRef.current.getBoundingClientRect().bottom<=window.innerHeight+100&&a.isInitial&&!a.isLoading&&!n.useOffsetTimeline&&a.count<4)){var s="h"===(null===r||void 0===r?void 0:r.type);o(i.path,Bt(Bt({},i.params),{},{oldestTweetId:s?void 0:a.oldestTweetId,start:s?(e.entry.length+a.tweet.length).toString():void 0}),this.setTweetCallback)}}},{key:"setTweetCallback",value:function(){var t=this.props,e=t.query,n=t.timelineSettings,i=t.tweetSec,r=t.pagination,a=t.follow,o=t.toggleHideBottomWrappter;r&&(a&&o&&o(!1),(0,v.n)(),e&&r.ualTagProps.search&&(0,v.p)(),p.J3.refreshModule(i||"sr"),n.highload&&window.dispatchEvent(new Event("loaded")))}},{key:"renderTimelineTweet",value:function(t,e){var n=this.props,i=n.query,r=n.login,a=n.timelineSettings,o=n.tweetSec,s=n.muteState,l=s.muteUserIds.includes(t.userId),c=s.directMuteTweetIds.includes(t.id);return l&&!c?null:(0,_.jsx)("div",{className:It().TweetContainer,ref:this.tweetRef,children:(0,_.jsx)(Tt.ZP,{query:i,login:r,tweet:t,tweetSec:o||"sr",tweetPos:(e+1).toString(),photoMode:a.imageMode,showPreview:a.showPreview,showQuotedTweetImage:a.showQuotedTweetImage,showReplyMention:a.showReplyMention,showViolationReport:a.showViolationReport,showMuteMenuList:a.showMuteMenuList})},e)}},{key:"renderLoading",value:function(){var t=this.props,e=t.paginationState,n=t.children;return e.isLoading?(0,_.jsx)(h.Z,{}):e.isLast?null:(0,_.jsx)(g.Z,{onClick:this.onClick,isLast:!n})}},{key:"renderError",value:function(){return(0,_.jsx)(m.Z,{onClick:this.onClick})}},{key:"render",value:function(){var t=this.props,e=t.paginationState,n=t.tweetSec,i=t.children;return(0,_.jsxs)("div",{id:n||"sr",className:"target_modules_viewability",children:[this.buildTimeline(),!e.isFailed&&this.renderLoading(),e.isFailed&&this.renderError(),i]})}}]),n}(f.Component),Ht=(0,i.$j)((function(t){return{paginationState:t.paginationState,muteState:t.muteState}}),(function(t){return{setTweet:function(e,n,i){t((0,r.nM)({path:e,params:n})).then((function(){"function"===typeof i&&i()}))},setOldestTweetId:function(e){t((0,r.Es)(e))},setIsLast:function(e){t((0,r.AY)(e))},setUseOffsetTimeline:function(e){t((0,r.KV)(e))}}}))(Et)},4e4:function(t){t.exports={Loading:"Loading_Loading__V7gFP",loadingIcon:"Loading_loadingIcon__NwA9q"}},91206:function(t){t.exports={Chart:"Chart_Chart__O7FlN","recharts-layer":"Chart_recharts-layer__TX1yW","recharts-brush":"Chart_recharts-brush__pnOS3",tweet:"Chart_tweet__N_p8X","recharts-refarea":"Chart_recharts-refarea__SzPXT",Header:"Chart_Header__bZBJl",title:"Chart_title__EHs17",closeModal:"Chart_closeModal__3ZLcb",term:"Chart_term__v9EuK",totalCount:"Chart_totalCount__4Jj6o",panel:"Chart_panel__Th_H9",spanTab:"Chart_spanTab__E3b04",selected:"Chart_selected__8mzjw",parent:"Chart_parent__wIZjZ",transition:"Chart_transition__nKSdE",brushbar:"Chart_brushbar__pusqd",handle:"Chart_handle__fHoJv",customtooltip:"Chart_customtooltip__9AT4m",label:"Chart_label__xtbjR",count:"Chart_count__zMwW8",high:"Chart_high__4SxLQ",low:"Chart_low__hB8EX",number:"Chart_number__bz4Us",unit:"Chart_unit__i6dDZ",referenceLabel:"Chart_referenceLabel__fo_Vr",wide:"Chart_wide__F_vBj",narrow:"Chart_narrow__QnwgA",time:"Chart_time__JXK_7",sentiment:"Chart_sentiment__nCkop",percentage:"Chart_percentage__LLL_9",faceIcon:"Chart_faceIcon__Z36zj",positive:"Chart_positive__zMOYB",negative:"Chart_negative__spOFF",center:"Chart_center__Qb846"}},87276:function(t){t.exports={ChartModal:"ChartModal_ChartModal__RLWxc",SlideIn:"ChartModal_SlideIn__3AGS2",below:"ChartModal_below__rQ_wH",chartArea:"ChartModal_chartArea__Q9HlP",Header:"ChartModal_Header__k9DC_",title:"ChartModal_title__bWnAD",closeModal:"ChartModal_closeModal__Moz7y",close:"ChartModal_close__hVyaC",SlideOut:"ChartModal_SlideOut__1Gt6_",btWrapper:"ChartModal_btWrapper__eUQGV",spacer:"ChartModal_spacer__Y_EeC",loading:"ChartModal_loading__dzU1H",loadingIcon:"ChartModal_loadingIcon__WyEAa"}},57774:function(t){t.exports={LoadingError:"LoadingError_LoadingError__8q2EO"}},59633:function(t){t.exports={More:"More_More__khS67",lastComponent:"More_lastComponent__e3qQb",button:"More_button__C9NnB",text:"More_text__iPusc",highload:"More_highload__CQcnV"}},35875:function(t){t.exports={TimelineInfeedYda:"TimelineInfeedYda_TimelineInfeedYda__BV1UJ"}},28066:function(t){t.exports={TimelineYda:"TimelineYda_TimelineYda__N0GWi"}},65902:function(t){t.exports={BestTweet:"BestTweet_BestTweet__PdLfm",ribbon:"BestTweet_ribbon__5n3b2",BestTweetContainer:"BestTweet_BestTweetContainer___dqqC"}},75340:function(t){t.exports={ChartLink:"ChartLink_ChartLink__BqUUZ",chartIcon:"ChartLink_chartIcon__i_qTb"}},87543:function(t){t.exports={TLLink:"TLLink_TLLink__JLLvs"}},28471:function(t){t.exports={TweetContainer:"Timeline_TweetContainer__skerq"}},35225:function(t){t.exports={W2ARailway:"W2ARailway_W2ARailway__YClgm"}}}]);