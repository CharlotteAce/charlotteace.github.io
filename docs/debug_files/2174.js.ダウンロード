(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2174],{52443:function(e,t,r){"use strict";r.d(t,{Z:function(){return z}});var n=r(2664),i=(r(41539),r(12419),r(47941),r(82526),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(69070),r(92777)),o=r(82262),a=r(10748),c=r(45959),s=r(63553),l=r(37247),u=r(59499),d=(r(21249),r(49257)),h=r(11868),p=r(73291),f=r(42985),m=r(94184),v=r.n(m),g=r(67294),y=r(86288),_=r(21915),w=r(2056),b=r(82564),k=r(71916),x=r(78600),T=(r(91038),r(78783),r(41817),r(32165),r(66992),r(33948),r(47042),r(74916),r(23123),r(23157),r(85893));function j(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var S=function(e){(0,c.Z)(r,e);var t=M(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"buildUrlEntity",value:function(e){var t,r=this.props,n=r.tweet,i=r.removeImageUrl,o=j(n.urls);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(e===a.url)return a.displayUrl}}catch(u){o.e(u)}finally{o.f()}var c,s=j(n.media);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(e===l.item.url)return i?"":l.item.displayUrl}}catch(u){s.e(u)}finally{s.f()}return e}},{key:"buildHashTagEntity",value:function(e){var t=e.slice(1);return"#".concat(t)}},{key:"buildMentionEntiry",value:function(e){return e}},{key:"buildTextDom",value:function(){var e=this,t=this.props.tweet,r=t.displayTextFragments,n=t.displayTextEntities;if(!n)return r;var i=r.split("\n"),o=n.split("\n"),a=[];return i.forEach((function(t,r){var n,i=o.shift();i&&(i.startsWith("http://")||i.startsWith("https://")?n=e.buildUrlEntity(i):"#"===i.charAt(0)||"\uff03"===i.charAt(0)?n=e.buildHashTagEntity(i):"@"!==i.charAt(0)&&"\uff20"!==i.charAt(0)||(n=e.buildMentionEntiry(i))),a.push((0,T.jsxs)(g.Fragment,{children:[t,n||null]},r))})),a}},{key:"render",value:function(){return this.buildTextDom()}}]),r}(g.Component),C=S,O=r(25846),I=r(38157),R=r(87026),N=r.n(R);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var E=function(e){(0,c.Z)(r,e);var t=D(r);function r(e){var n;(0,i.Z)(this,r),n=t.call(this,e),(0,u.Z)((0,a.Z)(n),"anchorRef",void 0),(0,u.Z)((0,a.Z)(n),"mediaTiles",void 0),(0,u.Z)((0,a.Z)(n),"clParams",void 0),n.onClickOverallTweet=n.onClickOverallTweet.bind((0,a.Z)(n)),n.toggleMediaViewer=n.toggleMediaViewer.bind((0,a.Z)(n)),n.onClickImage=n.onClickImage.bind((0,a.Z)(n)),n.onClickSensitiveMask=n.onClickSensitiveMask.bind((0,a.Z)(n)),n.renderTweetText=n.renderTweetText.bind((0,a.Z)(n)),n.renderSensitiveMask=n.renderSensitiveMask.bind((0,a.Z)(n)),n.renderMediaTiles=n.renderMediaTiles.bind((0,a.Z)(n)),n.renderAccount=n.renderAccount.bind((0,a.Z)(n)),n.renderFooter=n.renderFooter.bind((0,a.Z)(n)),n.renderTweetLink=n.renderTweetLink.bind((0,a.Z)(n));var o=n.props,c=o.tweet,s=o.tweetPos;return n.state={showContact:!1,showSensitiveMask:!!c.possiblySensitive,showMediaViewer:!1,mediaIndex:0},n.mediaTiles=(0,x.r)(c.media),n.clParams=(0,k.q)(c,s),n.anchorRef=g.createRef(),n}return(0,o.Z)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.tweetSec;t.timelineState.currentTimeStamp===e.timelineState.currentTimeStamp&&w.J3.refreshModule(r)}},{key:"toggleMediaViewer",value:function(){this.setState({showMediaViewer:!this.state.showMediaViewer})}},{key:"onClickImage",value:function(e,t){var r=this;return t.preventDefault(),this.setState({mediaIndex:e},(function(){return r.toggleMediaViewer()})),!1}},{key:"createMediaContainer",value:function(e){return"image"===e.media.type?this.createImageContainer(e):"video"===e.media.type||"animatedGif"===e.media.type?this.createVideoContainer(e):"youTube"===e.media.type?this.createYoutubeContainer(e):void 0}},{key:"createImageContainer",value:function(e){return(0,T.jsx)("div",{className:N().imageContainer,children:(0,T.jsx)("a",{"data-cl-params":(0,_.cl)(W(W({},this.clParams),{},{_cl_link:"twlimg",mov:"no"})),children:(0,T.jsx)("img",{src:e.media.item.thumbnailImageUrl,onClick:this.onClickImage.bind(null,e.viewerPos),loading:"lazy"})})})}},{key:"createVideoContainer",value:function(e){var t,r=v()((t={},(0,u.Z)(t,N().imageContainer,!0),(0,u.Z)(t,N().video,!0),t));return(0,T.jsx)("div",{className:N().imageContainer,children:(0,T.jsx)("a",{className:r,"data-cl-params":(0,_.cl)(W(W({},this.clParams),{},{_cl_link:"twlimg",mov:"yes"})),onClick:function(){return!1},children:(0,T.jsx)("img",{src:e.media.item.thumbnailImageUrl,onClick:this.onClickImage.bind(null,e.viewerPos),loading:"lazy"})})})}},{key:"createYoutubeContainer",value:function(e){var t,r=v()((t={},(0,u.Z)(t,N().imageContainer,!0),(0,u.Z)(t,N().video,!0),t));return(0,T.jsx)("a",{href:e.media.item.mediaUrl,className:r,target:"_blank","data-cl-params":(0,_.cl)(W(W({},this.clParams),{},{_cl_link:"twlimg",mov:"yes"})),children:(0,T.jsx)("img",{src:e.media.item.thumbnailImageUrl,loading:"lazy"})})}},{key:"createMediaTile",value:function(){var e,t=this,r=this.props.tweet,n=v()((e={},(0,u.Z)(e,N().imageContainerWrapper,!0),(0,u.Z)(e,N().big,1===r.media.length),e));return(0,T.jsx)("div",{className:n,children:this.mediaTiles.map((function(e,r){return(0,T.jsx)("div",{className:N().imageContainerDivider,children:e.map((function(e,r){return(0,T.jsx)(g.Fragment,{children:t.createMediaContainer(e)},r)}))},r)}))})}},{key:"onClickSensitiveMask",value:function(){this.setState({showSensitiveMask:!1})}},{key:"renderTweetText",value:function(){var e=this.props.tweet;return(0,T.jsx)("p",{className:N().body,children:(0,T.jsx)(C,{tweet:e,removeImageUrl:!0})})}},{key:"renderSensitiveMask",value:function(){return 0===this.mediaTiles.length?null:(0,T.jsx)(I.Z,{onClick:this.onClickSensitiveMask,clParams:this.clParams})}},{key:"renderMediaTiles",value:function(){return 0===this.mediaTiles.length?null:this.createMediaTile()}},{key:"renderAccount",value:function(){var e=this.props.tweet;return(0,T.jsx)("div",{className:N().info,children:(0,T.jsxs)("p",{className:N().author,children:[(0,T.jsx)(y.Z,{size:16,fill:"#000"}),(0,T.jsx)("span",{className:N().authorName,children:e.name}),e.badge.show&&(0,T.jsx)(d.i,{size:18,fill:e.badge.color}),(0,T.jsxs)("span",{className:N().authorID,children:["@",e.screenName]})]})})}},{key:"renderFooter",value:function(){var e=this.props,t=e.timelineState,r=e.tweet;return(0,T.jsxs)("div",{className:N().footer,children:[(0,T.jsxs)("ul",{className:N().action,children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(h.T,{size:17,fill:"rgba(0, 0, 0, 0.43)"}),(0,T.jsx)("span",{children:r.replyCount>0?r.replyCount.toLocaleString():""})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(p.H,{size:18,fill:"rgba(0, 0, 0, 0.43)"}),(0,T.jsx)("span",{children:r.rtCount>0?r.rtCount.toLocaleString():""})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(f.g,{size:18,fill:"rgba(0, 0, 0, 0.43)"}),(0,T.jsx)("span",{children:r.likesCount>0?r.likesCount.toLocaleString():""})]})]}),(0,T.jsx)("time",{className:N().time,children:(0,b.a)(t.currentTimeStamp,r.createdAt)})]})}},{key:"renderTweetLink",value:function(){var e=this.props.tweet;return(0,T.jsx)("a",{className:N().overallLink,ref:this.anchorRef,href:e.detailUrl,"data-cl-params":(0,_.cl)(W(W({},this.clParams),{},{_cl_link:"tweet"}))})}},{key:"onClickOverallTweet",value:function(e){var t,r;e.target instanceof HTMLElement&&("A"!==e.target.tagName&&"IMG"!==e.target.tagName&&null!==(t=document.getSelection())&&void 0!==t&&t.isCollapsed&&(null===(r=this.anchorRef.current)||void 0===r||r.click()))}},{key:"renderTweet",value:function(){return(0,T.jsxs)("div",{className:N().InterestTweet,onClick:this.onClickOverallTweet,children:[(0,T.jsxs)("div",{className:N().bodyContainer,"overflow-wrap":"break-word",children:[this.state.showSensitiveMask?this.renderSensitiveMask():this.renderMediaTiles(),this.renderTweetText(),this.renderAccount(),this.renderFooter()]}),this.renderTweetLink()]})}},{key:"render",value:function(){var e=this.props.tweet;return(0,T.jsxs)(T.Fragment,{children:[this.renderTweet(),this.state.showMediaViewer&&(0,T.jsx)(O.Z,{tweet:e,toggleViewer:this.toggleMediaViewer,index:this.state.mediaIndex,hideQuoteCount:!0,clParams:this.clParams})]})}}]),r}(g.Component),z=(0,n.$j)((function(e){return{timelineState:e.timelineState}}))(E)},66699:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});r(41539),r(12419),r(47941),r(82526),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(69070);var n=r(59499),i=r(92777),o=r(82262),a=r(45959),c=r(63553),s=r(37247),l=(r(21249),r(94184)),u=r.n(l),d=r(67294),h=r(21915),p=r(13791),f=r(51035),m=r.n(f),v=(r(39714),r(74916),r(15306),r(82564)),g=r(8501),y=r.n(g),_=r(85893);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var b=function(e){(0,a.Z)(r,e);var t=w(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){var e,t=this.props,r=t.time,i=t.topics,o=t.isNew,a=u()((e={},(0,n.Z)(e,y().Item,!0),(0,n.Z)(e,y().isNew,o),e));return(0,_.jsxs)("section",{className:a,children:[(0,_.jsx)("time",{children:(0,v.a)(Date.now()/1e3,r)}),(0,_.jsx)("ul",{className:y().queryList,children:i.map((function(e,t){return(0,_.jsxs)("li",{children:[(0,_.jsx)("a",{href:e.url,"data-cl-params":(0,h.cl)({_cl_link:"topic",_cl_position:e.pos?e.pos.toString():"",word:e.topicName&&e.topicName.replace(/([:;])/g,(function(e){return encodeURIComponent(e)}))||"",topicid:e.topicId,new:o?1:0,featured:e.notice?1:0}),children:e.topicName}),e.notice&&(0,_.jsx)("span",{className:y().notice})]},t)}))})]})}}]),r}(d.Component),k=b;function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var j=function(e){(0,a.Z)(r,e);var t=T(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"renderTitle",value:function(){var e=this.props.sameThemeOtherTopic;return(0,_.jsxs)("h1",{className:m().title,children:[e.themeName,"\u306e\u4e3b\u306a\u8a71\u984c"]})}},{key:"renderTitleLink",value:function(){var e=this.props.sameThemeOtherTopic;return(0,_.jsxs)("h1",{className:m().title,children:[(0,_.jsx)("a",{href:e.themeUrl,"data-cl-params":(0,h.cl)({_cl_link:"theme"}),children:e.themeName}),"\u306e\u4e3b\u306a\u8a71\u984c"]})}},{key:"render",value:function(){var e,t=this.props,r=t.sameThemeOtherTopic,i=t.showTitleLink,o=void 0===i||i,a=t.putMargin,c=u()((e={target_modules_viewability:!0},(0,n.Z)(e,m().SameThemeOtherTopic,!0),(0,n.Z)(e,m().topMargin,a),e));return(0,_.jsx)(p.Z,{children:(0,_.jsxs)("div",{id:"inttl",className:c,children:[o?this.renderTitleLink():this.renderTitle(),(0,_.jsx)("div",{className:m().history,children:r.history.map((function(e,t){return(0,_.jsx)(k,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),t)}))})]})})}}]),r}(d.Component),Z=j},53:function(e,t,r){"use strict";r.d(t,{Z:function(){return L}});r(12419),r(47941),r(82526),r(38880),r(49337),r(33321),r(69070);var n=r(92777),i=r(82262),o=r(10748),a=r(45959),c=r(63553),s=r(37247),l=r(59499),u=(r(89554),r(41539),r(54747),r(57327),r(39714),r(3823)),d=r(94184),h=r.n(d),p=r(67294),f=r(25088),m=r(21915),v=r(2056),g=r(90116),y=(r(91038),r(78783),r(43290),r(74916),r(4723),r(23123),r(21249),r(69600),r(85827),r(65380));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(){function e(t){(0,n.Z)(this,e),(0,l.Z)(this,"gridMap",[]),(0,l.Z)(this,"props",void 0),(0,l.Z)(this,"rankMap",{color:["red","orange","yellow","lime","green","turquoise","blue","violet","purple","pink"],weight:["bold","bold","bold","bold","bold","regular","regular","regular","regular","regular"],area:[24,16,16,16,12,12,6,6,6,6],widthMax:[10,6,6,6,4,4,3,3,3,3],minFontSize:[24,16,16,16,16,16,16,16,16,16]}),this.props=t,this.resetGrid()}return(0,i.Z)(e,[{key:"resetGrid",value:function(){this.gridMap=Array.from(new Array(24),(function(e){return new Array(24).fill(-1)}))}},{key:"strCount",value:function(e){for(var t=0,r=0;r<e.length;r++)e[r].match(/[A-Z0-9]/)?t+=1.5:t+=0,e[r].match(/[a-z]/)?t+=18/13:t+=0,e[r].match(/[A-Za-z0-9]/)?t+=0:t+=2;return(t-=(e.split(" ").length-1)*(1/3))/2}},{key:"checkPos",value:function(e,t,r,n){var i=this.props,o=i.clientWidth/24,a=i.clientHeight/24,c=!1;e:for(var s=0;s<r.length;s++){var l=Math.floor((t*a+s*n)/a)-2,u=t+Math.ceil(n*(s+1)/a)+2,d=e+Math.ceil(n*this.strCount(r[s])/o)+1;if(u>24||d>24){c=!0;break e}for(var h=l<=0?0:l;h<(u>=24?24:u);h++)for(var p=e>0?e-1:0;p<(d>=24?24:d);p++)if(this.gridMap[h][p]>=0){c=!0;break e}}return c}},{key:"updatePos",value:function(e,t,r,n,i){for(var o=this.props,a=o.clientWidth/24,c=o.clientHeight/24,s=0;s<r.length;s++)for(var l=Math.floor((t*c+s*n)/c),u=t+Math.ceil(n*(s+1)/c),d=e+Math.ceil(n*this.strCount(r[s])/a),h=l;h<(u>=24?24:u);h++)for(var p=e;p<(d>=24?24:d);p++)-1===this.gridMap[h][p]&&(this.gridMap[h][p]=i)}},{key:"getPosition",value:function(e,t,r,n,i){var o=this,a=this.props,c=a.clientWidth,s=a.clientHeight,l=n.map((function(e){return o.strCount(e)})),u=c/24,d=s/24,h=r;e:for(var p=0;p<100;p++){p>50&&h>e+2&&(h-=2);var f=Math.floor(Math.random()*(i>2?23:24))+(i>2?1:0),m=Math.floor(24*Math.random());if(-1===this.gridMap[m][f]){var v=s-m*d;if(c-f*u<h*Math.max.apply(Math,(0,g.Z)(l))||v<h*n.length)continue e;if(this.checkPos(f,m,n,h))continue e;return this.updatePos(f,m,n,h,i),{x:f,y:m,newFontSize:h}}}}},{key:"getShape",value:function(e,t,r,n){var i=this,o=e.map((function(e){return i.strCount(e)})),a=Math.floor(t/o[0]),c=Math.floor(t/(o[0]+o[1]+1)),s=Math.floor(t/o[2]),l=Math.floor(t/(o[1]+o[2]+1)),u=Math.max(Math.min(a,r),n),d=Math.max(Math.min(c,r),n),h=Math.max(Math.min(s,r),n),p=Math.max(Math.min(l,r),n),f=d,m=[e.join(" ")];return 3===e.length?o[0]*u<=t&&(o[1]+o[2])*u<=t&&u>n?(f=u,m=[e[0],e[1]+" "+e[2]]):(o[0]+o[1])*d<=t&&o[2]*d<=t&&d>n?(f=d,m=[e[0]+" "+e[1],e[2]]):o[2]*h<=t&&(o[0]+o[1])*h<=t&&h>n?(f=h,m=[e[0]+" "+e[1],e[2]]):(o[1]+o[2])*p<=t&&o[0]*p<=t&&p>n?(f=p,m=[e[0],e[1]+" "+e[2]]):(f=Math.max(t/Math.max.apply(Math,(0,g.Z)(o)),n),m=e):(f=n,m=e),{size:f,dispTopic:m}}},{key:"renderTopic",value:function(){for(var e=this.props,t=e.clientWidth,r=e.clientHeight,n=e.ifr,i=this.props.wordCloudCategory,o=i.topics,a=i.categoryIdEncoded,c=i.categoryNameEncoded,s=[],l=0;l<(null===o||void 0===o?void 0:o.length)&&!(l>=10);l++){var u=o[l],d=u.topicId,h=u.topicName,p=u.topicNameSplit,f=u.topicNameEncoded,m=u.themeId,v=this.rankMap.color[l],g=this.strCount(h),_=this.rankMap.area[l]/120*576*(t*r)/576,w=this.rankMap.minFontSize[l],b=l>0?s[l-1].size:32,k=Math.max(Math.min(Math.floor(Math.sqrt(_/g)),b),w),x=t*(this.rankMap.widthMax[l]/10),T=this.getShape(p,x,k,w),j=T.size,Z=T.dispTopic,M=void 0;(M=this.getPosition(w,k,j,Z,l))||(Z=p,M=this.getPosition(w,k,j,Z,l));var S=M||{x:0,y:0,newFontSize:j},C=S.x,O=S.y,I=S.newFontSize,R=(0,y.J)("/realtime/search/interest/topic/".concat(d),{topicThid:m,topicName:f,topicCategoryName:c,topicCategoryId:a,rkf:"1",ifr:n});s.push({x:C,y:O,c:l,url:R,color:v,size:I,weight:"bold",dispTopic:Z,fit:!!M,topicId:d,topicName:h,topicNameSplit:p,minFontSize:w,fontSizeABC:k})}return s.length>=5&&s.filter((function(e){return e.fit})).length<5&&(s=this.rePosition(s)),s}},{key:"rePosition",value:function(e){var t=this;return e.map((function(e){var r=e.c,n=e.size,i=e.topicNameSplit,o=e.minFontSize,a=e.fontSizeABC;if(e.fit)return e;var c=e.dispTopic,s=void 0;if((s=t.getPosition(o,a,n,c,r))||(c=i,s=t.getPosition(o,a,n,c,r)),s){var l=s,u=l.x,d=l.y,h=l.newFontSize;return w(w({},e),{},{dispTopic:c,x:u,y:d,size:h,fit:!0})}return e}))}},{key:"getWordCloudGridMap",value:function(){if(0!==this.props.clientWidth){var e=[];e=this.renderTopic(),this.gridMap.map((function(e){return e.filter((function(e){return-1===e})).length})).reduce((function(e,t){return e+t}))>=300&&(this.resetGrid(),e=this.renderTopic());for(var t=0;e.length>4&&e.filter((function(e){return e.fit})).length<5&&(this.resetGrid(),e=this.renderTopic(),!(t>100));)t++;return e}}}]),e}(),k=r(13791),x=r(40419),T=r.n(x),j=(r(92222),r(42907)),Z=r.n(j),M=r(69403),S=r.n(M),C=r(85893);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var I=function(e){(0,a.Z)(r,e);var t=O(r);function r(e){var i;return(0,n.Z)(this,r),i=t.call(this,e),(0,l.Z)((0,o.Z)(i),"pressDownTimer",void 0),(0,l.Z)((0,o.Z)(i),"pressUpTimer",void 0),i.onTouchStart=i.onTouchStart.bind((0,o.Z)(i)),i.onTouchEnd=i.onTouchEnd.bind((0,o.Z)(i)),i.state={isPressed:!1},i}return(0,i.Z)(r,[{key:"setTopicStyle",value:function(e,t){var r=this.props.topic.dispTopic;return 1===r.length?{radius:[1,1,1,1],top:4,bottom:4}:2===r.length?0===t?e.length>=r[1].length?{radius:[1,1,1,0],top:4,bottom:3}:{radius:[1,1,0,0],top:4,bottom:1}:e.length>r[0].length?{radius:[0,1,1,1],top:3,bottom:4}:{radius:[0,0,1,1],top:1,bottom:4}:3===r.length?0===t?e.length>=r[1].length?{radius:[1,1,1,0],top:4,bottom:3}:{radius:[1,1,0,0],top:4,bottom:1}:1===t?e.length>r[0].length&&e.length>r[2].length?{radius:[0,1,1,0],top:3,bottom:3}:e.length>r[0].length?{radius:[0,1,0,0],top:3,bottom:1}:e.length>r[2].length?{radius:[0,0,1,0],top:1,bottom:3}:{radius:[0,0,0,0],top:1,bottom:1}:e.length>=r[1].length?{radius:[0,1,1,1],top:3,bottom:4}:{radius:[0,0,1,1],top:1,bottom:4}:{radius:[1,1,1,1],top:4,bottom:4}}},{key:"onTouchStart",value:function(){var e=this;setTimeout((function(){e.setState({isPressed:!0})}),30)}},{key:"onTouchEnd",value:function(){var e=this;setTimeout((function(){e.setState({isPressed:!1})}),100)}},{key:"renderTopic",value:function(e,t){var r,n=this.props.topic,i=this.setTopicStyle(e,t),o=h()((r={},(0,l.Z)(r,S().topic,!0),(0,l.Z)(r,S().highlight,this.state.isPressed),r));return(0,C.jsx)(p.Fragment,{children:(0,C.jsx)("span",{className:o,style:{backgroundColor:Z().color.light.palette[n.color][1],borderRadius:i.radius.map((function(e){return"".concat(4*e,"px")})).join(" "),paddingTop:"".concat(i.top,"px"),paddingBottom:"".concat(i.bottom,"px")},children:e})},"tp_".concat(n.topicId,"_").concat(t))}},{key:"render",value:function(){var e,t,r=this,n=this.props,i=n.index,o=n.topic,a=n.categoryName,c=n.isVisible;if(!o.fit)return null;var s=h()((e={},(0,l.Z)(e,S().WordItem,!0),(0,l.Z)(e,S().visible,c),e)),u=h()((t={},(0,l.Z)(t,S().link,!0),(0,l.Z)(t,S()["rank".concat(i+1)],!0),t));return(0,C.jsx)("div",{className:s,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchEnd,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd,style:{top:"calc( ( 100% / 24 ) * ".concat(o.y," )"),left:"calc( ( 100% / 24 ) * ".concat(o.x," )")},children:(0,C.jsx)("a",{className:u,href:o.url,"data-cl-params":(0,m.cl)({_cl_link:"cloudcd",_cl_position:(i+1).toString(),category:a,topicrnk:(o.c+1).toString(),topicid:o.topicId,word:o.topicName}),style:{fontSize:o.size,fontWeight:o.weight,color:Z().color.light.palette[o.color][6]},children:o.dispTopic.map((function(e,t){return(0,C.jsxs)(p.Fragment,{children:[r.renderTopic(e,t),t+1!==o.dispTopic.length&&(0,C.jsx)("br",{})]},"tp_".concat(o.topicId,"_").concat(t))}))})})}}]),r}(p.Component);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var N=function(e){(0,a.Z)(r,e);var t=R(r);function r(e){var i;return(0,n.Z)(this,r),i=t.call(this,e),(0,l.Z)((0,o.Z)(i),"rootRef",p.createRef()),i.state={isVisible:!1},i}return(0,i.Z)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.categoryName,n=t.categoryIndex,i=t.topicMap;return(0,C.jsx)("article",{className:T().WordCloudContainer,ref:this.rootRef,children:i.map((function(t,i){return(0,C.jsx)(I,{key:(i+1).toString(),index:n,topic:t,categoryName:r,isVisible:e.state.isVisible})}))})}}]),r}(p.Component),P=r(30371),W=r.n(P);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var L=function(e){(0,a.Z)(r,e);var t=z(r);function r(e){var i;(0,n.Z)(this,r),i=t.call(this,e),(0,l.Z)((0,o.Z)(i),"switcherRef",void 0),(0,l.Z)((0,o.Z)(i),"mainRef",void 0),(0,l.Z)((0,o.Z)(i),"rootRef",void 0),(0,l.Z)((0,o.Z)(i),"wordCloudRefs",[]);var a=e.categoryList,c=e.currentIndex;i.initState=i.initState.bind((0,o.Z)(i)),i.onMove=i.onMove.bind((0,o.Z)(i)),i.onMoved=i.onMoved.bind((0,o.Z)(i)),i.renderPaginations=i.renderPaginations.bind((0,o.Z)(i)),i.renderSwitcherSlide=i.renderSwitcherSlide.bind((0,o.Z)(i)),i.renderMainSlide=i.renderMainSlide.bind((0,o.Z)(i)),i.state={isLoading:!0,pagination:c,clientWidth:0,clientHeight:202,topicMap:[]},i.switcherRef=p.createRef(),i.mainRef=p.createRef(),i.rootRef=p.createRef();for(var s=0;s<a.length;s++)i.wordCloudRefs.push(p.createRef());return i}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.categoryList,n=t.ifr;this.setState({clientWidth:window.innerWidth||320},(function(){for(var t=[],i=0;i<r.length;i++){var o={wordCloudCategory:r[i],clientWidth:e.state.clientWidth||320,clientHeight:202,ifr:n},a=new b(o);t.push(a.getWordCloudGridMap())}e.setState({isLoading:!1,topicMap:t},(function(){var t,r;null!==(t=e.switcherRef.current)&&void 0!==t&&t.splide&&null!==(r=e.mainRef.current)&&void 0!==r&&r.splide&&e.mainRef.current.splide.sync(e.switcherRef.current.splide),v.J3.removeModule("splide__pagination"),v.J3.addModulesWithViewability("twcloud"),setTimeout(e.initState,10)}))}))}},{key:"initState",value:function(){var e,t=this;this.rootRef.current&&new IntersectionObserver((function(e){return t.observerCallback(e)}),{root:null,rootMargin:"0px",threshold:.5}).observe(null===(e=this.rootRef)||void 0===e?void 0:e.current)}},{key:"observerCallback",value:function(e){var t=this,r=this.props.currentIndex;e.forEach((function(e){if(e.isIntersecting&&e.intersectionRatio>=.5){var n,i=t.wordCloudRefs[r];if(i)return void(null===(n=i.current)||void 0===n||n.setState({isVisible:!0}))}}))}},{key:"onMove",value:function(e){if(e.index>=0){this.setState({pagination:e.index});var t=this.wordCloudRefs[e.index];t.current&&t.current.setState({isVisible:!0})}}},{key:"onMoved",value:function(e){v.J3.refreshViewability()}},{key:"renderPaginations",value:function(){for(var e=this.props.categoryList,t=[],r=0,n=0;n<e.length;n++){var i;if(!(this.state.topicMap[n].filter((function(e){return e.fit})).length<5)){var o=h()((i={},(0,l.Z)(i,W().pagination,!0),(0,l.Z)(i,W().active,this.state.pagination===r),i));t.push((0,C.jsx)("li",{className:o},"pagination_".concat(r))),r++}}return t}},{key:"renderSwitcherSlide",value:function(){for(var e=this.props,t=e.categoryList,r=[],n={options:{arrows:!1,pagination:!1,wheel:!0,waitForTransition:!0,flickMaxPages:1,height:32,fixedHeight:32,start:e.currentIndex,perMove:1,autoWidth:!0,gap:8,rewind:!0,rewindByDrag:!0,isNavigation:!0,keyboard:!0,trimSpace:!0,focus:t.length>5?"center":void 0,updateOnMove:!0},onMoved:this.onMoved},i=0,o=0;o<t.length;o++)this.state.topicMap[o].filter((function(e){return e.fit})).length<5||(r.push((0,C.jsx)(u.jw,{children:(0,C.jsx)("span",{className:W().switch,children:(0,C.jsx)("a",{"data-cl-params":(0,m.cl)({_cl_link:"cloudtab",_cl_position:(i+1).toString(),category:t[o].categoryName}),children:t[o].categoryName})})},"slideSwitcher_".concat(i))),i++);return(0,C.jsx)(u.tv,E(E({ref:this.switcherRef},n),{},{children:r}))}},{key:"renderMainSlide",value:function(){for(var e=this.props,t=e.categoryList,r=[],n={options:{arrows:!1,pagination:!1,height:202,wheel:!0,waitForTransition:!0,flickMaxPages:1,start:e.currentIndex,perMove:1,rewind:!0,rewindByDrag:!0,keyboard:!0},onMove:this.onMove,onMoved:this.onMoved,onResize:function(e){e.refresh()}},i=0,o=0;o<t.length;o++)this.state.topicMap[o].filter((function(e){return e.fit})).length<5||(r.push((0,C.jsx)(u.jw,{children:this.state.topicMap[o]&&(0,C.jsx)(N,{ref:this.wordCloudRefs[i],categoryName:t[o].categoryName,categoryIndex:i,topicMap:this.state.topicMap[o]})},"slideMain_".concat(i))),i++);return(0,C.jsxs)(u.tv,E(E({hasTrack:!1,ref:this.mainRef},n),{},{children:[(0,C.jsx)(u.Gj,{children:r}),t.length>1&&(0,C.jsx)("div",{className:W().navigationWrapper,children:(0,C.jsx)("ul",{className:W().paginationContainer,children:this.renderPaginations()})})]}))}},{key:"render",value:function(){var e;if(this.state.isLoading||0===this.state.topicMap.length)return(0,C.jsx)("div",{className:W().WordCloudSwipe,children:(0,C.jsx)(f.Z,{})});var t=h()((e={},(0,l.Z)(e,W().WordCloudSwipe,!0),(0,l.Z)(e,"target_modules_viewability",!0),e));return(0,C.jsx)(k.Z,{children:(0,C.jsxs)("div",{ref:this.rootRef,id:"twcloud",className:t,"data-disable-tab-swipe":"on",children:[(0,C.jsx)("h1",{children:"\u30af\u30e9\u30a6\u30c9"}),(0,C.jsxs)("div",{className:W().container,children:[(0,C.jsx)("div",{className:W().switcherContainer,"data-disable-tab-swipe":"on",children:this.renderSwitcherSlide()}),(0,C.jsx)("article",{className:W().swipeContainer,"data-disable-tab-swipe":"on",children:this.renderMainSlide()})]})]})})}}]),r}(p.Component)},87026:function(e){e.exports={InterestTweet:"InterestTweet_InterestTweet__tKFl6",footer:"InterestTweet_footer__dySpA",action:"InterestTweet_action__zgQmc",time:"InterestTweet_time__9yYDJ",imageContainer:"InterestTweet_imageContainer__6tgYM",video:"InterestTweet_video__Tmgs1",imageContainerWrapper:"InterestTweet_imageContainerWrapper__uJT1F",big:"InterestTweet_big__knD9R",imageContainerDivider:"InterestTweet_imageContainerDivider__KG3Wp",bodyContainer:"InterestTweet_bodyContainer__jsk3r",body:"InterestTweet_body__kDAz0",info:"InterestTweet_info__Tp2at",author:"InterestTweet_author__SkDGM",authorName:"InterestTweet_authorName__sFlo7",authorID:"InterestTweet_authorID__oEbZh",overallLink:"InterestTweet_overallLink__5OKjZ"}},51035:function(e){e.exports={SameThemeOtherTopic:"SameThemeOtherTopic_SameThemeOtherTopic___ZueR",topMargin:"SameThemeOtherTopic_topMargin__1NZb9",title:"SameThemeOtherTopic_title__nFMrg",history:"SameThemeOtherTopic_history__r56IG"}},8501:function(e){e.exports={Item:"SameThemeOtherTopicItem_Item___caZR",queryList:"SameThemeOtherTopicItem_queryList__i8JlV",notice:"SameThemeOtherTopicItem_notice__VKCo_",isNew:"SameThemeOtherTopicItem_isNew___EFUB"}},40419:function(e){e.exports={WordCloudContainer:"WordCloud_WordCloudContainer__rAQEd"}},69403:function(e){e.exports={WordItem:"WordItem_WordItem__0ao32",link:"WordItem_link__c9hMb",topic:"WordItem_topic__VyS__",highlight:"WordItem_highlight__663L1",visible:"WordItem_visible__iV4xg",rank1:"WordItem_rank1__s2gi2",tc_bounce:"WordItem_tc_bounce__Ybx7W",rank2:"WordItem_rank2__OGh_k",rank3:"WordItem_rank3__EOyXX",rank4:"WordItem_rank4__rsUzr",rank5:"WordItem_rank5__oRN1D",rank6:"WordItem_rank6__H5yiD",rank7:"WordItem_rank7__GQ5Li",rank8:"WordItem_rank8__IReZi",rank9:"WordItem_rank9__dwcta",rank10:"WordItem_rank10__jervP"}},30371:function(e){e.exports={WordCloudSwipe:"WordCloudSwipe_WordCloudSwipe__K9EdZ",container:"WordCloudSwipe_container__eKcl8",switcherContainer:"WordCloudSwipe_switcherContainer__SVCK3",switch:"WordCloudSwipe_switch__007Mf",swipeContainer:"WordCloudSwipe_swipeContainer__Iru9u",navigationWrapper:"WordCloudSwipe_navigationWrapper__lutmT",paginationContainer:"WordCloudSwipe_paginationContainer__pgSUu",pagination:"WordCloudSwipe_pagination__Gi_62",active:"WordCloudSwipe_active__UTzFz"}}}]);