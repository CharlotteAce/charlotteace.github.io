(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9330],{78600:function(e,t,i){"use strict";i.d(t,{r:function(){return n}});i(21249);var n=function(e){if(0===e.length)return[];var t=[],i=-1,n=e.map((function(e){return"image"!==e.type&&"video"!==e.type&&"animatedGif"!==e.type||i++,{media:e,viewerPos:i}}));return e.length>0&&(t[0]=[n[0]]),e.length>1&&(t[1]=[n[1]]),e.length>2&&(3===e.length?t[1].push(n[2]):(t[0].push(n[2]),t[1].push(n[3]))),t}},25846:function(e,t,i){"use strict";i(12419),i(47941),i(82526),i(38880),i(49337),i(33321),i(69070);var n=i(92777),o=i(82262),r=i(10748),s=i(45959),a=i(63553),c=i(37247),l=i(59499),u=(i(57327),i(41539),i(21249),i(89554),i(54747),i(39714),i(3823)),d=i(55477),h=i(11329),p=i(94184),f=i.n(p),v=i(93041),m=i(67294),g=i(38811),y=i(21915),_=i(2056),w=i(83402),b=i.n(w),O=i(85893);function Z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(i),!0).forEach((function(t){(0,l.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,a.Z)(this,i)}}var S=function(e){(0,s.Z)(i,e);var t=k(i);function i(e){var o;(0,n.Z)(this,i),o=t.call(this,e),(0,l.Z)((0,r.Z)(o),"splideRef",void 0),(0,l.Z)((0,r.Z)(o),"contentRef",void 0),(0,l.Z)((0,r.Z)(o),"imageRef",void 0),(0,l.Z)((0,r.Z)(o),"videoRefs",void 0),(0,l.Z)((0,r.Z)(o),"media",void 0),o.state={isOpen:!1,startY:0,isFlick:!1,isZoomed:!1,isImage:!0,page:0,showControls:!1,scrollY:0};var s=o.props.tweet;return o.media=s.media.filter((function(e){return"youTube"!==e.type})),o.splideRef=m.createRef(),o.contentRef=m.createRef(),o.imageRef=m.createRef(),o.videoRefs=function(){var e;return null===(e=o.media)||void 0===e?void 0:e.map((function(){return m.createRef()}))}(),o.restoreScroll=o.restoreScroll.bind((0,r.Z)(o)),o.closeViewer=o.closeViewer.bind((0,r.Z)(o)),o.onTouchStart=o.onTouchStart.bind((0,r.Z)(o)),o.onTouchMove=o.onTouchMove.bind((0,r.Z)(o)),o.onTouchEnd=o.onTouchEnd.bind((0,r.Z)(o)),o.onMounted=o.onMounted.bind((0,r.Z)(o)),o.onMove=o.onMove.bind((0,r.Z)(o)),o.onTouchVideo=o.onTouchVideo.bind((0,r.Z)(o)),o.onEndedVideo=o.onEndedVideo.bind((0,r.Z)(o)),o.onActive=o.onActive.bind((0,r.Z)(o)),o.onInactive=o.onInactive.bind((0,r.Z)(o)),o.onZoomChange=o.onZoomChange.bind((0,r.Z)(o)),o.renderImage=o.renderImage.bind((0,r.Z)(o)),o.renderVideo=o.renderVideo.bind((0,r.Z)(o)),o}return(0,o.Z)(i,[{key:"componentDidMount",value:function(){var e,t,i,n,o=this,r=this.props.index;this.setState({isOpen:!0,isImage:Boolean("image"===this.media[r].type),scrollY:window.scrollY});var s=document.querySelector("body");s&&setTimeout((function(){s.style.overflow="hidden",document.addEventListener("touchmove",o.disableScroll)}),100),null!==(e=YAHOO)&&void 0!==e&&null!==(t=e.JP)&&void 0!==t&&null!==(i=t.rma)&&void 0!==i&&null!==(n=i.smp)&&void 0!==n&&n.sv&&YAHOO.JP.rma.smp.sv.pause(),document.addEventListener("enterpictureinpicture",this.closeViewer)}},{key:"componentWillUnmount",value:function(){var e,t,i,n,o=document.querySelector("body");o&&(o.style.overflow="auto",document.removeEventListener("touchmove",this.disableScroll)),null!==(e=YAHOO)&&void 0!==e&&null!==(t=e.JP)&&void 0!==t&&null!==(i=t.rma)&&void 0!==i&&null!==(n=i.smp)&&void 0!==n&&n.sv&&YAHOO.JP.rma.smp.sv.play(),document.removeEventListener("enterpictureinpicture",this.closeViewer)}},{key:"disableScroll",value:function(e){e.preventDefault()}},{key:"restoreScroll",value:function(){window.scrollTo(0,this.state.scrollY)}},{key:"closeViewer",value:function(){var e=this,t=this.props.toggleViewer;this.setState({isOpen:!1},(function(){e.restoreScroll(),setTimeout(t,100)}))}},{key:"onTouchStart",value:function(e){e.touches.length>1||this.setState({startY:e.touches[0].pageY})}},{key:"onTouchMove",value:function(e){if(!(e.touches.length>1||this.state.isZoomed)){var t=e.touches[0].pageY-this.state.startY;(t<-40||t>100)&&this.setState({isFlick:!0})}}},{key:"onTouchEnd",value:function(e){e.touches.length>1||!this.state.isFlick||(this.closeViewer(),this.setState({startY:0,isFlick:!1}))}},{key:"onMounted",value:function(e){this.setState({page:e.index}),_.J3.refreshViewability()}},{key:"onMove",value:function(e){this.imageRef.current&&this.imageRef.current.reset(),this.setState({page:e.index,isImage:Boolean("image"===this.media[e.index].type),showControls:!1})}},{key:"onTouchVideo",value:function(){!this.state.isFlick&&this.setState({showControls:!0})}},{key:"onEndedVideo",value:function(){!this.state.isFlick&&this.setState({showControls:!0})}},{key:"onActive",value:function(e){var t,i=null===(t=this.videoRefs[e.index])||void 0===t?void 0:t.current;if(i)if(v.Z.isSupported()){var n=new v.Z;n.loadSource(i.src),n.attachMedia(i),i.play()}else i.canPlayType("application/vnd.apple.mpegurl")&&i.play()}},{key:"onInactive",value:function(e){this.videoRefs.forEach((function(t,i){var n;i!==e.index&&(null===(n=t.current)||void 0===n||n.pause())}))}},{key:"onZoomChange",value:function(e){var t=this;setTimeout((function(){t.setState({isZoomed:e>1})}),100)}},{key:"renderImage",value:function(e){return(0,O.jsx)(g.Z,{ref:this.imageRef,onZoomChange:this.onZoomChange,children:(0,O.jsx)("div",{className:b().MediaWrapper,children:(0,O.jsx)("img",{className:b().Image,src:e.mediaUrl})})})}},{key:"renderVideo",value:function(e,t){return(0,O.jsx)("video",{onTouchEnd:this.onTouchVideo,onEnded:this.onEndedVideo,ref:this.videoRefs[t],className:b().Video,playsInline:!0,preload:"auto",controls:this.state.showControls,disablePictureInPicture:!0,poster:e.thumbnailImageUrl,src:e.mediaUrl})}},{key:"render",value:function(){var e,t=this,i=this.props,n=i.index,o=i.tweet,r=i.hideQuoteCount,s=i.clParams,a=f()((e={target_modules_viewability:!0},(0,l.Z)(e,b().Wrapper,!0),(0,l.Z)(e,b().isOpen,this.state.isOpen),e)),c={options:{width:"100%",arrows:!1,pagination:!1,drag:!this.state.isZoomed,start:n},onMounted:this.onMounted,onMove:this.onMove,onActive:this.onActive,onInactive:this.onInactive};return(0,O.jsx)("div",{id:"twlimgfl",className:a,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,children:(0,O.jsxs)("div",{className:b().Overlay,onClick:this.closeViewer,children:[!this.state.isZoomed&&(0,O.jsxs)("aside",{className:b().Controller,children:[(0,O.jsxs)("p",{className:b().Navigation,children:[this.state.page+1," / ",this.media.length]}),(0,O.jsxs)("div",{className:b().ActionLinks,children:[(0,O.jsxs)("a",{href:o.detailUrl,"data-cl-params":(0,y.cl)(j(j({},s),{},{_cl_link:"imgvwrp",reply:o.replyCount.toString()})),children:[(0,O.jsx)("span",{children:o.replyCount}),"\u4ef6\u306e\u8fd4\u4fe1"]}),!r&&(0,O.jsxs)("a",{href:o.detailQuoteUrl,"data-cl-params":(0,y.cl)(j(j({},s),{},{_cl_link:"imgvwqt",quote:o.qtCount.toString()})),children:[(0,O.jsx)("span",{children:o.qtCount}),"\u4ef6\u306e\u5f15\u7528"]})]}),(0,O.jsxs)("div",{className:b().Buttons,children:[this.state.isImage&&(0,O.jsx)("a",{href:this.media[this.state.page].item.mediaUrl,target:"_blank","data-cl-params":(0,y.cl)(j(j({},s),{},{_cl_link:"imgvwopn"})),download:!0,children:(0,O.jsx)(d.T,{fill:"#ffffff",size:28})}),(0,O.jsx)("a",{className:b().Close,onClick:this.closeViewer,"data-cl-params":(0,y.cl)(j(j({},s),{},{_cl_link:"imgvwcls"})),children:(0,O.jsx)(h.b,{fill:"#ffffff",size:28})})]})]}),(0,O.jsx)("div",{className:b().Content,ref:this.contentRef,children:(0,O.jsx)(u.tv,j(j({ref:this.splideRef},c),{},{children:this.media.map((function(e,i){return(0,O.jsxs)(u.jw,{className:b().Slide,onClick:function(e){return e.stopPropagation()},children:["image"===e.type&&t.renderImage(e.item),("video"===e.type||"animatedGif"===e.type)&&t.renderVideo(e.item,i)]},"slide_".concat(i))}))}))})]})})}}]),i}(m.Component);t.Z=S},38157:function(e,t,i){"use strict";i(47941),i(82526),i(57327),i(41539),i(38880),i(89554),i(54747),i(49337),i(33321),i(69070);var n=i(59499),o=(i(67294),i(21915)),r=i(92197),s=i.n(r),a=i(85893);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.Z=function(e){var t=e.onClick,i=e.clParams;return(0,a.jsx)("article",{className:s().SensitiveMask,children:(0,a.jsx)("a",{onClick:t,"data-cl-params":(0,o.cl)(l(l({},i),{},{_cl_link:"snstv"})),children:(0,a.jsxs)("p",{children:["\u30bb\u30f3\u30b7\u30c6\u30a3\u30d6\u306a\u5185\u5bb9\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u53ef\u80fd\u6027\u306e\u3042\u308b\u30e1\u30c7\u30a3\u30a2\u3067\u3059\u3002",(0,a.jsx)("span",{children:"\u8868\u793a\u3059\u308b"})]})})})}},83402:function(e){e.exports={Wrapper:"MediaViewer_Wrapper__uiVG_",isOpen:"MediaViewer_isOpen__K8Y1D",Overlay:"MediaViewer_Overlay__GDK1U",Controller:"MediaViewer_Controller__EJOdk",Navigation:"MediaViewer_Navigation__cClYI",ActionLinks:"MediaViewer_ActionLinks__XxCm6",Buttons:"MediaViewer_Buttons___zrDZ",Close:"MediaViewer_Close__3vxuL",Content:"MediaViewer_Content__fYIRr",Slide:"MediaViewer_Slide__WGfg8",MediaWrapper:"MediaViewer_MediaWrapper__FD9gI",Image:"MediaViewer_Image__Lbv14",Video:"MediaViewer_Video___jMxJ"}},92197:function(e){e.exports={SensitiveMask:"SensitiveMask_SensitiveMask__ZnaDF"}}}]);