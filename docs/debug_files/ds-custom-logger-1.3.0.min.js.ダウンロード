!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DSCustomLogger=e():t.DSCustomLogger=e()}(this,(function(){return function(){"use strict";var t={466:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.CustomLoggerCore=void 0;var o=i(418),n=function(){function t(t){this.mem={},o.inline.initialize(t,this.mem,!1)}return t.prototype.init=function(){this.mem.fn.inlineInit()},t.prototype.logEvent=function(t,e,i){void 0===t&&(t="_"),void 0===e&&(e={}),this.mem.fn.inlineLogEvent(t,e,i)},t.prototype.logClick=function(t,e,i,o,n,r){void 0===o&&(o={}),this.mem.fn.inlineLogClick(t,e,i,o,n,r)},t.prototype.getClickLogUrl=function(t,e,i,o,n){return void 0===o&&(o={}),this.mem.fn.inlineLogClick(t,e,i,o,n,void 0,!0)},t.prototype.addModules=function(t,e,i){this.mem.fn.inlineAddModules(t,e,i)},t.prototype.addModulesWithViewability=function(t,e,i){this.mem.fn.inlineAddModulesWithViewability(t,e,i)},t.prototype.refreshModule=function(t,e,i,o){void 0===i&&(i=!0),void 0===o&&(o={}),this.mem.fn.inlineRefreshModule(t,e,i,o)},t.prototype.refreshViewability=function(){this.mem.fn.inlineRefreshViewability()},t.prototype.removeModule=function(t){this.mem.fn.inlineRemoveModule(t)},t.prototype.isTargetModule=function(t){return this.mem.fn.inlineIsTargetModule(t)},t.prototype.getModulesInfo=function(){return this.mem.fn.inlineGetModulesInfo()},t.prototype.destroy=function(){this.mem.fn.inlineDestroy()},t.prototype.reInit=function(t){this.mem.fn.inlineReInit(t)},t.prototype.setAttribute=function(t){this.mem.fn.inlineSetAttribute(t)},t.prototype.clearAttribute=function(t){this.mem.fn.inlineClearAttribute(t)},t.prototype.getPsid=function(){return this.mem.fn.inlineGetPsid()},t.prototype.logView=function(t,e,i,o){void 0===e&&(e=!1),this.mem.fn.inlineLogView(t,i,o)},t}();e.CustomLoggerCore=n},396:function(t,e){var i,o,n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)},r=this&&this.__rest||function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomLogger=void 0;var l=function(){function t(t){t=t||{},i=window,o=document,this.ins={},this.debug_log=o.location.toString().indexOf("debug_log=1")>0,this.customLoggerCoreConf=u();var e=t.target_modules,l=void 0===e?{}:e,a=t.target_modules_viewability,s=void 0===a?{}:a,c=t.keys,d=void 0===c?{}:c,g=r(t,["target_modules","target_modules_viewability","keys"]);this.setModule(l),this.setViewableModule(s),this.customLoggerCoreConf.keys=n(n({},this.customLoggerCoreConf.keys),d),this.customLoggerCoreConf=n(n({},this.customLoggerCoreConf),g)}return t.prototype.setKeyValue=function(t,e){var i,o=a(t),r=a(e);"target_modules"===o?this.setModule(e):"target_modules_viewability"===o?this.setViewableModule(e):""!==o&&""!==r&&(this.customLoggerCoreConf=n(n({},this.customLoggerCoreConf),((i={})[o]=r,i)))},t.prototype.deleteKey=function(t){var e=a(t);""!==e&&delete this.customLoggerCoreConf[e]},t.prototype.deletePageDataKey=function(t){t=a(t),void 0!==this.customLoggerCoreConf.keys&&""!==t&&delete this.customLoggerCoreConf.keys[t]},t.prototype.findInstance=function(){return s("Object",this.ins)&&"function"==typeof this.ins.init},t.prototype.addObject=function(t,e){var i={};if("string"==typeof e)i[e]=e;else if(function(t){return Array.isArray(t)}(e))for(var o in e)i[e[o]]=e[o];else i=e;for(var n in i)this.customLoggerCoreConf[t][n]=i[n]},t.prototype.setClickTimeout=function(t){return this.setKeyValue("click_timeout",t),this},t.prototype.setModule=function(t){return this.addObject("target_modules",t),this},t.prototype.setHierarchyid=function(t){return this.setKeyValue("hierarchyid",t),this},t.prototype.startViewable=function(){return this.setKeyValue("viewability",!0),this},t.prototype.stopViewable=function(){return this.setKeyValue("viewability",!1),this},t.prototype.setViewableModule=function(t){return this.addObject("target_modules_viewability",t),this},t.prototype.setViewableTime=function(t){return this.setKeyValue("viewability_time",t),this},t.prototype.setCustomLoggerCoreConf=function(t){for(var e in t){var i=e,o=t[i];void 0!==o&&this.setKeyValue(i,o)}return this},t.prototype.setActtype=function(t){return this.setPageData({acttype:t}),this},t.prototype.setApptype=function(t){return this.setPageData({apptype:t}),this},t.prototype.setAuthid=function(t){return this.setPageData({_cl_tpid:t}),this},t.prototype.setCategorypath=function(t){return this.setPageData({cat_path:t}),this},t.prototype.setContentsid=function(t){return this.setPageData({ctsid:t}),this},t.prototype.setConttype=function(t){return this.setPageData({conttype:t}),this},t.prototype.setDevice=function(t){return this.setPageData({device:t}),this},t.prototype.setMetakeyword=function(t){return this.setPageData({_cl_mk:t}),this},t.prototype.setNonepv=function(t){return this.setPageData({nonepv:t}),this},t.prototype.setOpttype=function(t){return this.setPageData({opttype:t}),this},t.prototype.setPartner=function(t){return this.setPageData({prtnr:t}),this},t.prototype.setPagetype=function(t){return this.setPageData({pagetype:t}),this},t.prototype.setQuery=function(t){return this.setPageData({query:t}),this},t.prototype.setService=function(t){return this.setPageData({service:t}),this},t.prototype.setServiceid=function(t){return this.setPageData({srvid:t}),this},t.prototype.setStatus=function(t){return this.setPageData({status:t}),this},t.prototype.setPg=function(t){return this.setPageData({pg:t}),this},t.prototype.setIns=function(t){return this.setPageData({ins:t}),this},t.prototype.setUiid=function(t){return this.setPageData({uiid:t}),this},t.prototype.setBtid=function(t){return this.setPageData({_cl_btid:t}),this},t.prototype.setBtgid=function(t){return this.setPageData({_cl_btgid:t}),this},t.prototype.setBtcf=function(t){return this.setPageData({_cl_btcf:t}),this},t.prototype.targetClass=function(t){var e,i=[];t=t||"target_modules",e=document.getElementsByClassName(t);for(var o=0;o<e.length;o++){var n=e[o].getAttribute("id");null!==n&&""!==n?i.push(n):console.warn("CustomLogger: Not found id to the specified element")}return this.addObject("target_modules",i),this},t.prototype.targetViewableClass=function(t){var e,i=[];t=t||"target_modules_viewability",e=document.getElementsByClassName(t);for(var o=0;o<e.length;o++){var n=e[o].getAttribute("id");null!==n&&""!==n?i.push(n):console.warn("CustomLogger: Not found id to the specified element")}return this.addObject("target_modules_viewability",i),this},t.prototype.setPageData=function(t){var e,i;for(e in t)i=a(t[e]),""!==(e=a(e))&&""!==i&&(this.customLoggerCoreConf.keys[e]=i);return this},t.prototype.addPageData=function(t,e){var i={};return s("String",t)&&s("String",e)&&(i[t]=e,this.setPageData(i)),this},t.prototype.addCustomLoggerCoreConf=function(t,e){return this.setKeyValue(t,e),this},t.prototype.deleteCustomLoggerCoreConf=function(t){return this.deleteKey(t),this},t.prototype.deleteModule=function(t){return this},t.prototype.deleteViewableModule=function(t){return this},t.prototype.deletePageData=function(t){return this.deletePageDataKey(t),this},t.prototype.setCustomLoggerCore=function(t){return this.ins=t,this},t.prototype.setCallback=function(t){return"function"==typeof t&&this.setKeyValue("callback",t),this},t.prototype.simpleLogClick=function(t,e,i){var o,n,r,l,a,u,c=[];if(this.findInstance())if(s("Object",t)&&s("String",t._cl_module)){for(r in o=this.ins.getModulesInfo()){var d=o[r];if(null!==d)for(l in d.links)d.links[l].data._cl_module===t._cl_module&&c.push(d.links[l].data)}if(0===c.length)u=!1;else for(var g=0;g<c.length;g++){for(a in u=!0,t){if(void 0===c[g][a]){u=!1;break}if(String(c[g][a])!==String(t[a])){u=!1;break}}if(u){for(a in n={},c[g])"_cl_link"!==a&&"_cl_index"!==a&&(n[a]=c[g][a]);var f=c[g]._cl_link,m=c[g]._cl_index;this.ins.logClick(t._cl_module,f,m,n,e,i);break}}!1===u&&console.warn("CustomLogger: undefined link param in link data")}else console.warn("CustomLogger: the simpleLogClick must specify the _cl_module");else console.warn("CustomLogger: undefined CustomLoggerCore instance")},t.prototype.refreshViewability=function(){this.findInstance()&&"function"==typeof this.ins.refreshViewability&&this.ins.refreshViewability()},t.prototype.destroy=function(){window.DSCustomLogger.restartSession(),this.customLoggerCoreConf=u(),this.findInstance()&&"function"==typeof this.ins.destroy&&this.ins.destroy()},t.prototype.initCustomLoggerCore=function(){if(this.debug_log&&console.log(this.customLoggerCoreConf),void 0!==window.DSCustomLogger.CustomLoggerCore&&window.DSCustomLogger.CustomLoggerCore)return window.DSCustomLogger.customLoggerCoreConf=this.customLoggerCoreConf,this.ins=new window.DSCustomLogger.CustomLoggerCore(this.customLoggerCoreConf),this.ins},t}();function a(t){return"string"==typeof t?t.replace(/\^/g,""):t}function s(t,e){var i=Object.prototype.toString.call(e).slice(8,-1);return null!=e&&i===t}function u(){var t,e=a(function(){for(var t=document.getElementsByTagName("meta"),e=0;e<t.length;e++){var i=t[e].getAttribute("content");if("keywords"===t[e].getAttribute("name")&&"string"==typeof i)return i}return""}());return{target_modules:{},keys:n(n(n({_cl_cd:i.screen.colorDepth,_cl_ds:i.screen.width+"x"+i.screen.height,enc:(o.characterSet||o.charset).toLowerCase(),os:(t=navigator.userAgent,t.match(/windows\sphone/i)?"windowsphone":t.match(/windows/i)?"windows":t.match(/iphone|ipad/i)?"ios":t.match(/mac|ppc/i)?"mac":t.match(/android/i)?"android":"other"),_sr:(i.innerWidth||o.documentElement.clientWidth)+"x"+(i.innerHeight||o.documentElement.clientHeight)},isNaN(i.orientation)?{}:{_do:Math.abs(i.orientation)/90%2}),isNaN(i.devicePixelRatio)?{}:{dpr:i.devicePixelRatio}),""!==e?{_cl_mk:e}:{}),viewability:!1,viewability_time:1e3,target_modules_viewability:{},click_timeout:1e4}}e.CustomLogger=l},568:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.dataAttrs=void 0,e.dataAttrs={anc_pos_attr:"data-cl_cl_index",anc_v9y_attr:"data-cl-viewability",target_type:"data-cl-targettype",skip_attr:"data-cl-skip",ignore_click_attr:"data-cl-ignore_click",node_params_attr:"data-cl-params"}},287:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.define=void 0;var o=i(412);e.define={override:{},version:o.version,keys:null,referrer:null,hierarchyid:"0",target_modules:{},target_modules_viewability:{},viewability:!1,viewability_time:300,viewability_distance:50,link_target_attribute:"text",clb_host:"clb.yahoo.co.jp",clb_path:"/api/v1/clb",click_timeout:1e4,nofollow_class:"cl-nofollow",noclick_log:"cl-noclick-log",nolog_without_params:!1,debug_log:!1,extra:!1,target_right_click:!1,use_dom_parser:!1,log_view_on_init:!1,location:null,callback:null,params_kv_delimiter:":",params_pair_delimiter:";",click_sendbeacon:!1,ignore_click_interval:0,access_token:null}},418:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.inline=void 0;var o=i(287),n=i(255),r=i(656),l=i(697),a=i(714),s=i(119),u=i(882),c=i(804),d=i(568);e.inline={Uploader:s.Uploader,module:r.module,CLNode:l.CLNode,PageData:a.PageData,MsgHeader:n.MsgHeader,ViewabilityHandler:c.ViewabilityHandler,initialize:function(t,i,o){function n(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=i.length;if(0!==n)for(var r=t.conf,l=0;l<n;l++){var a=i[l];void 0!==a&&(r[e]=a)}else console.error("[DSCustomLogger.CustomLoggerCore.setValue] This parameter length is wrong.")}t=t||{},i.conf={},function(){function o(t){var e=function(t){for(var e=r.location,i=e.indexOf("?")+1,o=e.substring(i).split("&"),n=0;n<o.length;n++){var l=o[n].split("=");if(2===l.length&&u.util.trim(l[0])===t)return u.util.trim(l[1]).replace(/[!@#$%^&*();:'",./<>?_=¥+¥-]/gi,"")}return null}(t);return null!==e&&("true"===e||"1"===e)}var r=i.conf;for(var l in e.inline.define)"keys"!==(d=l)&&n(i,d,e.inline.define[d]);var a,s=document.location.hostname;for(var c in/.+\.yahoo\.co\.jp$/.test(s)||n(i,"clb_host","clb.yahooapis.jp"),r){var d;"keys"!==(d=c)&&n(i,d,t[d])}n(i,"location",t.location,document.location.href),r.keys=((a=new e.inline.PageData).set("_cl_psid",window.DSCustomLogger.PSID||u.util.rand()),a.set("_cl_url",u.util.removeProtocol(r.location).substring(0,u.util.MAX_VALUE_LENGTH)),t.keys&&a.merge(t.keys),a),n(i,"hierarchyid",r.override.hierarchyid,window.DSCustomLogger.HIERARCHYID),r.use_cl=!1!==t.use_cl,n(i,"noclick_log",t.noclick_log),void 0!==t.debug_log?r.debug_log=Number(t.debug_log)>0||o("debug_log"):r.debug_log=o("debug_log"),r.extra=!0===t.extra,r.disable_fip_key=!0===t.disable_fip_key,r.target_right_click=!0===t.target_right_click,r.use_dom_parser=!0===t.use_dom_parser,r.log_view_on_init=!1!==t.log_view_on_init,r.nolog_without_params=!r.use_dom_parser&&!0===t.nolog_without_params,u.util.debug=r.debug_log,r.debug_log&&1e4!==r.click_timeout&&console.warn("[DSCustomLogger.CustomLoggerCore.initialize] Click timeout set to "+r.click_timeout+"ms (default 10000ms)")}(),u.util.merge(i,{variable:{moduleList:new e.inline.module.List(i),uploader:new e.inline.Uploader(i),viewabilityHandler:null},fn:{inlineInit:function(){},inlineLogEvent:function(t,e,o){i.variable.uploader.sendEventLog(t,e,o)},inlineLogClick:function(t,e,o,n,r,l,a){var s,c;if(!n&&r&&(n={}),r&&(n._cl_oc=r),i.variable.uploader.sendClickLog((s=n,c={oc:r,event:null,moduleElement:null,targetElement:null,synch:!1,targetIsTop:!1,targetIsParent:!1,data:{_cl_module:t,_cl_link:e,_cl_index:o}},u.util.merge(c.data,s),c),l,a),!0===a)return i.variable.uploader.getLogUrl()},inlineAddModules:function(t,e,o){var n={_cl_am:1};(o=o||{}).pagedata&&u.util.merge(n,o.pagedata),o.useViewability=o.useViewability||!1;var r=i.variable.moduleList.addRange(t,o.useViewability);o.logViewWithoutLinks=!1!==o.logViewWithoutLinks;var l=o.logViewWithoutLinks?r:r.map((function(t){return t.links=t.links.filter((function(t){return t.viewable})),t})).filter((function(t){return t.links.length>0}));i.conf.use_cl&&l&&l.length>0&&i.variable.uploader.sendViewLog(l,n)},inlineAddModulesWithViewability:function(t,e,o){(o=o||{}).useViewability=i.conf.viewability,i.fn.inlineAddModules(t,e,o)},inlineRefreshModule:function(t,e,o,n){n=n||{};var r=!1!==o;i.variable.moduleList.refresh(t,r,n)},inlineRefreshViewability:function(){i.variable.moduleList.refreshViewability()},inlineRemoveModule:function(t){i.variable.moduleList.remove(t)},inlineIsTargetModule:function(t){return i.variable.moduleList.exists(t)},inlineGetModulesInfo:function(){return i.variable.moduleList.get()},inlineDestroy:function(){i.variable.moduleList.destroy(),i.variable.viewabilityHandler&&i.variable.viewabilityHandler.destroy()},inlineReInit:function(t){e.inline.initialize(t,i,!0)},inlineSetAttribute:function(t){t.keys&&i.conf.keys.merge(t.keys),t.hierarchyid&&(i.conf.hierarchyid=t.hierarchyid),t.referrer&&(i.conf.referrer=t.referrer.substring(0,u.util.MAX_VALUE_LENGTH)),t._cl_psid&&i.conf.keys.set("_cl_psid",t._cl_psid),t.location&&(i.conf.location=t.location,i.conf.keys.set("_cl_url",u.util.removeProtocol(t.location).substring(0,u.util.MAX_VALUE_LENGTH)))},inlineClearAttribute:function(t){for(var o in t)if("keys"===t[o]){var n=i.conf.keys.get("_cl_url"),r=i.conf.keys.get("_cl_psid");i.conf.keys=new e.inline.PageData,i.conf.keys.set("_cl_url",n),i.conf.keys.set("_cl_psid",r)}else"referrer"===t[o]?i.conf.referrer="":"_cl_psid"===t[o]?i.conf.keys.set("_cl_psid",""):"location"===t[o]&&(i.conf.location="",i.conf.keys.set("_cl_url",""))},inlineGetPsid:function(){return i.conf.keys.get("_cl_psid")},inlineLogView:function(t,o,n){var r={};if((o=o||{}).pagedata&&u.util.merge(r,o.pagedata),0!==t.length||o.event){for(var l=[],a=0;a<t.length;a++){var s=t[a],c=new e.inline.CLNode;c.mergeWithFilter(s,(function(t){return"_cl_module"!==t&&"module_links"!==t}));for(var d=[],g=1,f=0;f<s.module_links.length;f++){var m=s.module_links[f],p={viewable:!0,data:{_cl_module:s._cl_module,_cl_index:g++,_cl_viewable:2}};u.util.merge(p.data,m),d.push(p)}var h={moduleName:s._cl_module,moduleNode:c,links:d,identifier:s._cl_module};l.push(h)}i.conf.use_cl&&l&&i.variable.uploader.sendViewLog(l,r),n&&n.call(this)}},getNode:function(t,o){if(void 0===o&&(o=!1),!t)return null;var n=new e.inline.CLNode,r=u.util.getAttribute(t,"data-cl-oc");r&&n.set("_cl_oc",r);var l=u.util.getAttribute(t,d.dataAttrs.node_params_attr);if(null===l||0===l.length)return n;for(var a=l.split(i.conf.params_pair_delimiter),s=0;s<a.length;s++){var c=a[s].split(i.conf.params_kv_delimiter);if(2===c.length){var g=c[0],f=c[1];null!==g&&""!==g&&null!==f&&(f.length>u.util.MAX_VALUE_LENGTH&&(f=f.substring(0,u.util.MAX_VALUE_LENGTH)),u.util.isValidKey(g)&&f.length<=u.util.MAX_VALUE_LENGTH&&("_cl_index"!==g||o)&&n.set(g,f))}}return n}}}),function(){i.variable.moduleList.destroy();var t=i.variable.moduleList.addRange(i.conf.target_modules,!1),n=i.variable.moduleList.addRange(i.conf.target_modules_viewability,i.conf.viewability);i.conf.use_cl&&i.conf.log_view_on_init&&!o&&i.variable.uploader.sendViewLog(t.concat(n)),function(t){function e(i){(i&&"load"===i.type||"complete"===document.readyState)&&(document.removeEventListener("DOMContentLoaded",e,!1),window.removeEventListener("load",e,!1),t.call(this))}u.util.logDebug("[DSCustomLogger.CustomLoggerCore.setOnloadCallback]"),"complete"===document.readyState?setTimeout(e,0):(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1))}((function(){i.variable.viewabilityHandler=new e.inline.ViewabilityHandler(i)})),i.conf.callback&&u.util.isFunction(i.conf.callback)&&i.conf.callback()}(),u.util.logTrace("[DSCustomLogger] conf",i.conf)},define:o.define}},668:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.List=void 0;var o=i(418),n=i(882),r=i(568),l=function(){function t(t){this.mem=t,this.map={}}return t.prototype.add=function(t,e){this.map[n.util.trim(t)]=e},t.prototype.addRange=function(t,e){n.util.logDebug("[DSCustomLogger.Module.List]");var i,r=e?n.util.getScrollBarSize():{},l=[];for(var a in i=n.util.isStr(t)?new Array(t):t)if(n.util.prototypeHasOwnProperty(i,a)){var s=n.util.isArr(i)&&Array.isArray(i)?i[Number(a)]:a,u=Array.isArray(i)?n.util.trim(i[Number(a)]):n.util.trim(i[a]);if(this.exists(s))console.error('add() called with prev processed id:"'+s+'"');else{var c=o.inline.module(this.mem,u,s,e,r);c&&(this.add(s,c),l.push(c))}}return l},t.prototype.get=function(){return this.map},t.prototype.sendViewability=function(){var t=this,e=function(e,i){var o=function(t,e){for(var i=[],o=t.getElementsByTagName("a"),r=0;r<o.length;r++){var l=o[r];e&&!e.call(0,l)||i.push(l)}return n.util.sort(i)}(e.moduleElement,(function(o){var a,s;if(!n.util.getAttribute(o,r.dataAttrs.anc_pos_attr)){e.linkPosition++,o.setAttribute(r.dataAttrs.anc_pos_attr,e.linkPosition.toString());var u=e.link(n.util.getLinkTargetType(o,t.mem.conf.link_target_attribute),(null===(a=e.moduleNode)||void 0===a?void 0:a.map._cl_module)||l,e.linkPosition,o,(null===(s=e.moduleNode)||void 0===s?void 0:s.map._cl_link)||"",!1,!1,i);e.links[e.linkPosition-1]=u}return!("1"===n.util.getAttribute(o,r.dataAttrs.anc_v9y_attr)||!n.util.isElementVisible(o,i)||(o.setAttribute(r.dataAttrs.anc_v9y_attr,"1"),0))}));if(0!==o.length&&t.mem.conf.use_cl){var a=function(i,o){for(var a,s,u=[],c=0;c<i.length;c++){var d=i[c],g=n.util.getAttribute(d,r.dataAttrs.anc_pos_attr),f=e.link(n.util.getLinkTargetType(d,t.mem.conf.link_target_attribute),(null===(a=e.moduleNode)||void 0===a?void 0:a.map._cl_module)||l,Number(g),d,(null===(s=e.moduleNode)||void 0===s?void 0:s.map._cl_link)||"",!1,!0,o);u.push(f)}return u}(o,i),s={};n.util.merge(s,e),s.links=a,t.mem.variable.uploader.sendViewLog([s])}},i=function(){var e={};for(var i in t.map){var o=t.map[i];o.useViewability&&(e[i]=o)}return e}(),o=n.util.getScrollBarSize();for(var l in i)e(i[l],o)},t.prototype.refresh=function(t,e,i){var o=this;function l(t){return!n.util.getAttribute(t,r.dataAttrs.anc_pos_attr)}var a=this.map[n.util.trim(t)];if(a){i.isRefreshed=!0;var s=document.getElementById(t),u=this.mem.conf.use_dom_parser?n.util.getLinkElementsWithSkipAttr(this.mem,s,null,l):n.util.getLinkElements(s,(function(t){return o.mem.conf.nolog_without_params?l(t)&&function(t){return!!n.util.getAttribute(t,r.dataAttrs.node_params_attr)}(t):l(t)})),c=0;if(u.length>0){var d=a.setLink(u);if(c=u.length,a.useViewability){c=0;for(var g=0;g<d.length;g++)d[g].viewable&&c++}if(c>0&&(this.mem.conf.use_cl||i.event)){var f={};n.util.merge(f,a),e&&(f.links=d,this.mem.variable.uploader.sendViewLog([f],i.pagedata))}}}else console.error("refreshModule called on unknown section: "+t)},t.prototype.remove=function(t){var e=this.map[n.util.trim(t)];e&&(e.moduleElement.removeEventListener("click",e.clickEvent,!1),delete this.map[n.util.trim(t)])},t.prototype.destroy=function(){for(var t in this.map)this.remove(t)},t.prototype.exists=function(t){return void 0!==this.map[n.util.trim(t)]},t}();e.List=l},656:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.module=void 0;var o=i(668),n=i(882),r=i(568),l=function(t,e,i,o,l){function a(t,e){var i;return null!==(i=t.links[Number(e)-1])&&void 0!==i?i:null}function s(e,i,o,l,a,s,u,c){var d="",g=null,f=!u||n.util.isElementVisible(l,c),m={viewable:f,data:{_cl_module:i,_cl_index:o}};return u&&n.util.merge(m.data,{_cl_viewable:1}),s?(m.data._cl_link=a||"section",g=t.fn.getNode(l)):(null==l||l.setAttribute(r.dataAttrs.anc_pos_attr,o.toString()),u&&(null==l||l.setAttribute(r.dataAttrs.anc_v9y_attr,f?"1":"0")),(d=n.util.getLinkText(l,e))&&""!==d&&(g=t.fn.getNode(l)),d="_",m.data._cl_link=a||d),null!==g&&n.util.merge(m.data,g.getAll()),m}function u(e){var i=[];g.linkPosition=g.linkPosition||1;for(var o=null,a=null!==g.moduleNode?g.moduleNode.map._cl_module:null,u=null!==g.moduleNode?g.moduleNode.map._cl_link:"",c=void 0,f=0;f<e.length;f++)if("div"===(c=e[f]).tagName.toLowerCase()){var m=t.fn.getNode(c);o=s(n.util.getLinkTargetType(d,t.conf.link_target_attribute),a||g.moduleName,1,c,(null==m?void 0:m.map._cl_link)||u,!0,g.useViewability,l),g.links[0]=o,i.push(o)}else o=s(n.util.getLinkTargetType(d,t.conf.link_target_attribute),a||g.moduleName,g.linkPosition,c,u,!1,g.useViewability,l),g.links[g.linkPosition-1]=o,i.push(o),g.linkPosition++;return!d||"true"!==n.util.getAttribute(d,r.dataAttrs.skip_attr)||void 0===c&&!0===g.useViewability||(o=s(n.util.getLinkTargetType(d,t.conf.link_target_attribute),a||g.moduleName,1,c,u,!0,g.useViewability,l),g.links[0]=o,i.push(o)),i}function c(e){function i(e,i,o){var r,l=i instanceof HTMLAnchorElement&&i.target?i.target.toLowerCase():"_self";return"_self"!==l&&"_top"!==l&&"_parent"!==l&&window.name!==l||2===e.which||4===e.button||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||"on"===n.util.getAttribute(i,"data-cl-nofollow")||n.util.getAttribute(i,"href")&&"javascript:"===(null===(r=n.util.getAttribute(i,"href"))||void 0===r?void 0:r.substring(0,11).toLowerCase())||n.util.hasClass(i,t.conf.nofollow_class)||n.util.hasClass(o,t.conf.nofollow_class)}var o=function(t){var e=t.target;for(e&&3===e.nodeType&&(e=e.parentNode);e&&"a"!==e.nodeName.toLowerCase()&&"button"!==e.nodeName.toLowerCase()&&!("input"===e.nodeName.toLowerCase()&&e instanceof HTMLInputElement&&"submit"===n.util.getAttribute(e,"type"));)e=e.parentNode;return e}(e);if(o&&!n.util.hasClass(o,t.conf.noclick_log)){if(t.conf.ignore_click_interval>0){if("1"===o.getAttribute(r.dataAttrs.ignore_click_attr))return;o.setAttribute(r.dataAttrs.ignore_click_attr,"1"),setTimeout((function(){o.setAttribute(r.dataAttrs.ignore_click_attr,"0")}),t.conf.ignore_click_interval)}var l=o.nodeName.toLowerCase(),s=n.util.getAttribute(o,r.dataAttrs.anc_pos_attr);if(null!==a(g,s)){var u={data:function(){var i=a(g,s).data;if(!i._cl_th){var r=n.util.getAttribute(o,"href");r&&(i._cl_th=n.util.extractDomain(r)),r&&i._cl_th||(i._cl_th=n.util.extractDomain(t.conf.location))}return i._cl_tp||(o instanceof HTMLAnchorElement&&o.pathname?i._cl_tp=o.pathname.substring(0,n.util.MAX_VALUE_LENGTH):i._cl_tp=""),i._cl_xy=n.util.makeEventCoordinateText(e),i._cl_sr=n.util.makeScreenSizeText(),"contextmenu"===e.type&&(i._cl_clt=3),i}(),event:e,moduleElement:g.moduleElement,targetElement:o,targetObject:g,stop:i(e,o,g.moduleElement)||"input"===l||"button"===l,synch:"input"!==l&&"button"!==l&&!i(e,o,g.moduleElement)&&"contextmenu"!==e.type,targetIsTop:o&&o instanceof HTMLAnchorElement&&"_top"===o.target.toLowerCase(),targetIsParent:o&&o instanceof HTMLAnchorElement&&"_parent"===o.target.toLowerCase()};t.variable.uploader.sendClickLog(u,(function(t){if(n.util.logTrace("[DSCustomLogger.Uploader.redirect] sender ",t),t.synch){if(t.targetElement){var e=t.targetElement;if(n.util.isIE)"complete"!==document.readyState&&history.pushState("",document.title),t.targetIsTop?null!==top&&(top.document.location=e.href):t.targetIsParent?parent.document.location=e.href:document.location=e.href;else{var i=e.cloneNode(!0);if(i.dispatchEvent){var o=new MouseEvent("click",{bubbles:!0,cancelable:!1});i.dispatchEvent(o)}else i.click()}}}else n.util.logDebug("[DSCustomLogger.Uploader.redirect] synch "+t.synch)}))}}}n.util.logDebug("[DSCustomLogger.Module]");var d=document.getElementById(i);if(!d)return console.warn("Specified module not in DOM: "+i),null;var g={useViewability:o,moduleNode:t.fn.getNode(d),links:[],moduleName:e,targetType:n.util.getAttribute(d,r.dataAttrs.target_type),moduleElement:d,clickEvent:c,setLink:u,link:s,linkPosition:1};return n.util.logTrace("[DSCustomLogger.Module] targetObject ",g),u(t.conf.use_dom_parser?n.util.getLinkElementsWithSkipAttr(t,d):n.util.getLinkElements(d,(function(e){return!t.conf.nolog_without_params||!!n.util.getAttribute(e,r.dataAttrs.node_params_attr)}))),d.addEventListener("click",c,!1),t.conf.target_right_click&&d.addEventListener("contextmenu",c,!1),n.util.logTrace("[DSCustomLogger.Module] targetObject ",g),g};e.module=l,l.List=o.List},255:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.MsgHeader=void 0;var o=i(882),n=function(){function t(){this.map={},this.count=0}return t.prototype.set=function(t,e){var i=o.util.trim(e);o.util.isStr(i)&&(i=i.replace(/\\/g,"\\\\")),i.length>o.util.MAX_VALUE_LENGTH&&(i=i.substring(0,o.util.MAX_VALUE_LENGTH)),o.util.isValidPair(t,i)&&(this.map[o.util.trim(t)]=i,this.count++)},t.prototype.get=function(t){return this.map[t]},t.prototype.getAll=function(){return JSON.parse(JSON.stringify(this.map))},t.prototype.merge=function(t){if(t&&o.util.isObj(t))for(var e in t)o.util.prototypeHasOwnProperty(t,e)&&this.set(e,t[e])},t.prototype.mergeWithFilter=function(t,e){if(t&&o.util.isObj(t))for(var i in t)e&&!e.call(null,i)||o.util.prototypeHasOwnProperty(t,i)&&this.set(i,t[i])},t.prototype.getSize=function(){return this.count},t}();e.MsgHeader=n},697:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.CLNode=void 0;var r=function(t){function e(){return t.call(this)||this}return n(e,t),e}(i(255).MsgHeader);e.CLNode=r},714:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.PageData=void 0;var r=function(t){function e(e){var i=t.call(this)||this;return e&&i.merge(e),i}return n(e,t),e.prototype.makeFromPageData=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var o=new e,n=0;n<t.length;n++){var r=t[n];r instanceof e&&o.merge(r.getAll())}return o},e}(i(255).MsgHeader);e.PageData=r},119:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Uploader=void 0;var o=i(418),n=i(882),r=function(){function t(t){this.project="custom_log",this.dataSource="web",this.libName="customlogger-web",this.mem=t,this.currentBeaconUrl=""}return t.prototype.send=function(t,e,i,o,r){var l=this;!function(t,r){n.util.isDebug()&&n.util.logDebug("[DSCustomLogger.Uploader.send.exec] _cl_psid : "+l.mem.conf.keys.get("_cl_psid"));var a,s=(a=["https://",l.mem.conf.clb_host,l.mem.conf.clb_path,"?clSdk=cl-web&clHid=",l.mem.conf.hierarchyid,"&clTs=",(new Date).valueOf(),"&clSdkv=",l.mem.conf.version,"&clRnd=",n.util.rand(),"&clCmp=0"].join(""),n.util.logDebug("[DSCustomLogger.Uploader.getURI] result : "+a),a),u=function(t){return"q="+encodeURIComponent(t)}(t);r?l.currentBeaconUrl=s+"&"+u:l.mem.conf.click_sendbeacon&&n.util.isAvailableSendBeacon()&&void 0!==o&&function(t,e){n.util.logDebug("[DSCustomLogger.Uploader.send.exec] this method is sendBeacon transfer.");var i=new Blob([e],{type:"application/x-www-form-urlencoded;charset=UTF-8",host:l.mem.conf.clb_host}),o=l.mem.conf.access_token;return null!==o&&(t=t+"?access_token="+o),navigator.sendBeacon(t,i)}(s,u)&&i?null==e||e.call(0,i):function(t,r){n.util.logDebug("[DSCustomLogger.Uploader.send.exec] this method is XHR transfer.");var a=n.util.getXHR();a.open("POST",t,!0),a.withCredentials=!0,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");var s=l.mem.conf.access_token;null!==s&&a.setRequestHeader("Authorization","Bearer "+s),e&&n.util.isFunction(e)&&(a.timeout=l.mem.conf.click_timeout),a.onload=a.ontimeout=a.onerror=a.onabort=function(){e&&n.util.isFunction(e)&&i&&e.call(0,i,o)},a.send(r)}(s,u)}(t,r)},t.prototype.createCommondata=function(t){var e={_cl_platform:1,_cl_version:this.mem.conf.version},i=n.util.trim(n.util.cleanReferrer(null!==this.mem.conf.referrer?this.mem.conf.referrer:document.referrer));i&&!1!==t&&(e._cl_referer=i),this.mem.conf.extra&&(e._cl_extra=1),e._cl_ln||(e._cl_ln=this.libName),this.mem.conf.disable_fip_key||(e._cl_fip="1");var o=window.location.protocol||"";return o=o.replace(/:$/,""),e._cl_pr=o,e._cl_tzo=(new Date).getTimezoneOffset(),e._cl_tzo=e._cl_tzo?-1*e._cl_tzo/60:0,n.util.logDebug("[DSCustomLogger.Uploader.createCommondata] result : "+e),e},t.prototype.createCurrentUnixTimeData=function(){var t=Date.now();return{msec:t,secPartText:String(Math.floor(t/1e3))}},t.prototype.createClickLogJson=function(t){n.util.logTrace("[DSCustomLogger.Uploader.createClickLogJson] sender ",t);var e=this.createCurrentUnixTimeData(),i=new o.inline.PageData;i.set("_ts",e.secPartText);var r=(new o.inline.PageData).makeFromPageData(i,this.mem.conf.keys).getAll();return n.util.toJSON({commondata:this.createCommondata(),rows:[{p:this.project,d:"click",hierarchy_id:this.mem.conf.hierarchyid,data_source:this.dataSource,cs_unixtime_ms:e.msec,pagedata:r,click:function(){var e,i={};for(var o in t.targetObject&&t.targetObject.moduleNode&&(i=t.targetObject.moduleNode.getAll()),t.data)if(n.util.prototypeHasOwnProperty(t.data,o)){var r=t.data[o];null!==r&&String(r).length>n.util.MAX_VALUE_LENGTH&&(t.data[o]=String(r).substring(0,n.util.MAX_VALUE_LENGTH)),"function"==typeof t.data[o]&&(t.data[o]=null===(e=t.data[o])||void 0===e?void 0:e.toString()),i[o]=t.data[o]}return i}()}]})},t.prototype.createViewLogJson=function(t,e){var i=this;n.util.logTrace("[DSCustomLogger.Uploader.createViewLogJson] Modules ",t),n.util.logTrace("[DSCustomLogger.Uploader.createViewLogJson] Parameter ",e);var r=this.createCurrentUnixTimeData(),l=new o.inline.PageData;l.set("_ts",r.secPartText);var a=(new o.inline.PageData).makeFromPageData(l,this.mem.conf.keys);e&&a.merge(e);var s=a.getAll();return n.util.toJSON({commondata:this.createCommondata(),rows:[{p:this.project,d:"view",hierarchy_id:this.mem.conf.hierarchyid,data_source:this.dataSource,cs_unixtime_ms:r.msec,pagedata:s,linkdata:function(){var e=[],o=function(o){if(!n.util.prototypeHasOwnProperty(t,o))return"continue";var r=t[o];if(!r)return"continue";var l=function(){function t(t){var i,r,l={},a={};for(var s in t)if(n.util.prototypeHasOwnProperty(t,s)){if(i=s,r=t[s],"_cl_index"!==i&&("_cl_module"!==i||r===e._cl_module||r===o)&&"_cl_module"===i)continue;a[s]=t[s]}return n.util.merge(l,a),l}var e={params:{},_cl_module:n.util.trim(r.moduleName),links:[]};r.moduleNode&&(e.params=r.moduleNode.getAll());var o="",l=r.links;if(l)for(var a=0;a<l.length;a++)if(l[a])if(!i.mem.conf.viewability||l[a].viewable){var s=t(l[a].data);e.links.push(s)}else n.util.logDebug("Skipping not viewable link: "+l[a].data._cl_link);return e}();l.links.length>0?e.push(l):n.util.logDebug('[DSCustomLogger.Uploader.createViewLogRow] Not capturing 0 links module: "'+r.moduleName+'"')};for(var r in t)o(r);return e}()}]})},t.prototype.createEventJson=function(t,e,i){var r=this.createCurrentUnixTimeData(),l=new o.inline.PageData;l.set("_ts",r.secPartText);var a=(new o.inline.PageData).makeFromPageData(l,this.mem.conf.keys);for(var s in(e=e||{})._cl_action=t||"_",i&&(e._cl_oc=i),e)if(!n.util.prototypeHasOwnProperty(e,s)||n.util.isValidKey(s)){var u=e[s];"string"==typeof u&&u.length>n.util.MAX_VALUE_LENGTH&&(e[s]=u.substring(0,n.util.MAX_VALUE_LENGTH))}else delete e[s];var c=a.getAll();return n.util.merge(c,e),n.util.toJSON({commondata:this.createCommondata(),rows:[{p:this.project,d:"event",hierarchy_id:this.mem.conf.hierarchyid,data_source:this.dataSource,cs_unixtime_ms:r.msec,pagedata:c}]})},t.prototype._sendViewLog=function(t,e){n.util.logDebug("[DSCustomLogger.Uploader._sendViewLog]");var i=this.createViewLogJson(t,e);n.util.logTrace("[DSCustomLogger.Uploader._sendViewLog] Json ",i),this.send(i)},t.prototype._sendClickLog=function(t,e,i){var o;n.util.logDebug("[DSCustomLogger.Uploader._sendClickLog]");var r=this.createClickLogJson(t);n.util.logTrace("[DSCustomLogger.Uploader._sendClickLog] Json ",r),t.stop||null===(o=t.event)||void 0===o||o.preventDefault();var l=t.event?{autoClick:!0}:void 0;this.send(r,e,t,l,i)},t.prototype._sendEventLog=function(t,e,i){n.util.logDebug("[DSCustomLogger.Uploader._sendEventLog]");var o=this.createEventJson(t,e,i);n.util.logTrace("[DSCustomLogger.Uploader._sendEventLog] Json ",o),this.send(o)},t.prototype.sendViewLog=function(t,e){n.util.logDebug("[DSCustomLogger.Uploader.sendViewLog]"),this._sendViewLog(t,e)},t.prototype.sendClickLog=function(t,e,i){void 0===i&&(i=!1),n.util.logDebug("[DSCustomLogger.Uploader.sendClickLog]"),this._sendClickLog(t,e,i)},t.prototype.sendEventLog=function(t,e,i){n.util.logDebug("[DSCustomLogger.Uploader.sendEventLog]"),this._sendEventLog(t,e,i)},t.prototype.getLogUrl=function(){return this.currentBeaconUrl},t}();e.Uploader=r},882:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.util=void 0;var o=i(568),n={MAX_KEY_LENGTH:8,MAX_VALUE_LENGTH:300,CL_KEY_PREFIX:"_cl_",LINK_TAG_LIST:["a","button","input"],debug:!1,isDebug:function(){return n.debug},logDebug:function(t){this.isDebug()&&console.log("CustomLogger : ["+(new Date).getTime()+"]"+t)},logTrace:function(t,e){this.isDebug()&&(console.log("CustomLogger : [TRACELOG]["+(new Date).getTime()+"]"+t),console.log(e))},isFunction:function(t){return"[object Function]"===n.type(t)},isDate:function(t){return"[object Date]"===n.type(t)},isArr:function(t){return"[object Array]"===n.type(t)},isStr:function(t){return"string"===n.type(t)},isNum:function(t){return"number"===n.type(t)&&isFinite(t)},isNumeric:function(t){return Number(t)===t&&(t+"").replace(/^\s+|\s+$/g,"").length>0},isObj:function(t){return!!t&&"object"==typeof t},isHTMLElement:function(t){return t instanceof HTMLElement},isIE:navigator.userAgent.match(/MSIE\s[^;]*/)||navigator.userAgent.match(/Trident\/[^;]*/)?1:0,type:function(t){return null===t?t+"":"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t)||"object":typeof t},trim:function(t){return(null===t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")).replace(/[\u007f-\u00a0]|\s{2,}/g," ").replace(/\ufeff|\uffef|[\u0000-\u001f]|[\ue000-\uf8ff]/g,"")},getScrollBarSize:function(){var t=n.make("div");t.style.overflow="scroll",t.style.visibility="hidden",t.style.position="absolute",t.style.width="100px",t.style.height="100px",document.body.appendChild(t);var e={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return n.removeElementFromBody(t),e},make:function(t,e){var i=document.createElement(t);if(e&&n.isObj(e))for(var o in e)e.hasOwnProperty(o)&&i.setAttribute(o,e[o]);return i},removeElementFromBody:function(t){document.body.removeChild(t)},prototypeHasOwnProperty:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},getAttribute:function(t,e){var i="";return document.documentElement.hasAttribute||"class"!==e||(e="className"),this.isHTMLElement(t)&&(i=t.getAttribute(e)),i},cleanReferrer:function(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"":t},toJSON:function(t){return JSON.stringify(t)},isValidPair:function(t,e){return!(!this.isValidKey(t)||e.length>this.MAX_VALUE_LENGTH)||(console.warn("Invalid key/value pair ("+t+"="+e+") Size must be < 8/300 respectively."),!1)},isValidKey:function(t){return t.length<=this.MAX_KEY_LENGTH||0===t.indexOf(this.CL_KEY_PREFIX)},removeProtocol:function(t){return t?"http://"===t.substring(0,7)?t.substring(7,t.length):"https://"===t.substring(0,8)?t.substring(8,t.length):t:""},rand:function(){for(var t=0,e="";t++<16;){var i=Math.floor(62*Math.random());e+=i<10?i.toString():String.fromCharCode(i<36?i+55:i+61)}return e+n.timestamp().toString(36)},timestamp:function(){return+new Date},merge:function(t,e){if(e)for(var i in e)this.prototypeHasOwnProperty(e,i)&&(t[i]=e[i])},getXHR:function(){return new XMLHttpRequest},hasClass:function(t,e){function i(t,i){var o,r=!1;return t&&e&&(o=n.getAttribute(t,"class")||"",r=!!i&&(" "+o+" ").indexOf(" "+i+" ")>-1),r}if(this.isArr(e)){for(var o=0;o<e.length;o++)if(i(t,e[o]))return!0;return!1}return!(!this.isStr(e)||"string"!=typeof e)&&i(t,e)},extractDomain:function(t){var e=t.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i);return e&&e[1]},makeScreenSizeText:function(){return screen?screen.width+","+screen.height:""},makeEventCoordinateText:function(t){var e,i,o=[0,0],n=t.pageX,r=t.pageY;return this.isIE&&(e=document.documentElement,i=document.body,o=e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:i?[i.scrollTop,i.scrollLeft]:[0,0]),n||0===n||(n=t.clientX||0,this.isIE&&(n+=o[1])),r||0===r||(r=t.clientY||0,this.isIE&&(r+=o[0])),n+","+r},getLinkElements:function(t,e){t||(t=document);for(var i=[],o=0;o<this.LINK_TAG_LIST.length;o++)for(var n=t.getElementsByTagName(this.LINK_TAG_LIST[o]),r=0;r<n.length;r++){var l=n[r];e&&!e.call(0,l)||i.push(l)}return this.sort(i)},getLinkElementsWithSkipAttr:function(t,e,i,r){var l=this,a=function(t){for(var e=0;e<n.LINK_TAG_LIST.length;e++)if(l.isHTMLElement(t)&&t.tagName.toLowerCase()===n.LINK_TAG_LIST[e].toLowerCase())return!0;return!1};e||(e=document);var s=i||[],u=e.childNodes;if("true"!==this.getAttribute(e,o.dataAttrs.skip_attr))for(var c=0;c<u.length;c++){var d=u[c];a(d)&&(r&&!r.call(0,d)||s.push(d)),"true"!==this.getAttribute(d,o.dataAttrs.skip_attr)?s=this.getLinkElementsWithSkipAttr(t,d,s,r):this.isHTMLElement(d)&&"true"===n.getAttribute(d,o.dataAttrs.skip_attr)&&s.push(d)}return this.sort(s)},sort:function(t){return t[0]?(t.sort((function(t,e){return 3-(6&t.compareDocumentPosition(e))})),t):[]},getLinkContent:function(t){for(var e,i=0,o="";(e=t.childNodes[i])&&e;i++)1===e.nodeType&&("img"===e.nodeName.toLowerCase()&&e instanceof HTMLImageElement&&(o+=(this.getAttribute(e,"alt")||"")+" "),o+=this.getLinkContent(e));return o},getLinkText:function(t,e){if(!t)return"_";var i="";return e=e.toLowerCase(),i="input"===t.nodeName.toLowerCase()?this.getAttribute(t,"value"):"text"===e?t.textContent:"href"===e?this.removeProtocol(this.getAttribute(t,"href")):this.getAttribute(t,e)||"",""===(i=this.trim(i))&&(i=this.trim(this.getLinkContent(t))),i&&i.length>n.MAX_VALUE_LENGTH&&(i=i.substring(0,n.MAX_VALUE_LENGTH)),""===i?"_":i},isElementVisible:function(t,e){var i=window.getComputedStyle(t);if("hidden"===i.getPropertyValue("visibility")||"none"===i.getPropertyValue("display"))return!1;var o,n,r=t.getBoundingClientRect(),l=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;if(void 0===r.height||void 0===r.width?(o=Math.abs(r.bottom-r.top),n=Math.abs(r.right-r.left)):(o=r.height,n=r.width),document.documentElement.scrollWidth>document.documentElement.clientWidth&&(l-=e.height||0),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=e.width||0),r.right<=0||r.bottom<=0||r.left>=a||r.top>=l)return!1;var s={};return s.top=r.top<0?0:r.top,s.left=r.left<0?0:r.left,s.bottom=r.bottom>l?l:r.bottom,s.right=r.right>a?a:r.right,s.width=s.right-s.left,s.height=s.bottom-s.top,n*o/2<=s.width*s.height},getLinkTargetType:function(t,e){return n.hasClass(t,"cl-target_href")?"href":n.hasClass(t,"cl-target_text")?"text":n.hasClass(t,"cl-target_title")?"title":n.hasClass(t,"cl-target_id")?"id":e},isAvailableSendBeacon:function(){return void 0!==window.navigator.sendBeacon&&"undefined"!=typeof Blob}};e.util=n},412:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.3.0"},804:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.ViewabilityHandler=void 0;var o=i(882),n=function(){function t(t){var e=this;o.util.logDebug("[DSCustomLogger.ViewabilityHandler]"),this.mem=t,this.timer=null,this.pageLoadTime=Date.now(),this.pageLoadScrollY=this.getScrollY(),this.pageLoadScrollX=this.getScrollX(),this.lastApvScrollY=-1,this.lastApvScrollX=-1,this.userDispatchViewable=!1,this.mem.variable.moduleList.refreshViewability=function(){e.refreshViewabilityFunc()},window.addEventListener("scroll",(function(){e.viewabilityCb()}),!1)}return t.prototype.getScrollY=function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},t.prototype.getScrollX=function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft},t.prototype.handleViewability=function(){var t=this.getScrollY(),e=this.getScrollX(),i=-1===this.lastApvScrollY?t-this.pageLoadScrollY:t-this.lastApvScrollY,o=-1===this.lastApvScrollX?e-this.pageLoadScrollX:e-this.lastApvScrollX;(Math.abs(i)>this.mem.conf.viewability_distance||Math.abs(o)>this.mem.conf.viewability_distance||this.userDispatchViewable)&&(this.mem.variable.moduleList.sendViewability(),this.lastApvScrollY=t,this.lastApvScrollX=e,this.userDispatchViewable=!1)},t.prototype.viewabilityCb=function(){var t,e=this;null!==this.timer&&clearTimeout(this.timer),(new Date).getTime()-this.pageLoadTime<this.mem.conf.viewability_time&&(this.pageLoadScrollY=this.getScrollY(),this.pageLoadScrollX=this.getScrollX()),this.timer=setTimeout((function(){e.handleViewability()}),null!==(t=this.mem.conf.viewability_time)&&void 0!==t?t:0)},t.prototype.refreshViewabilityFunc=function(){this.userDispatchViewable=!0,this.viewabilityCb()},t.prototype.reInit=function(){this.pageLoadScrollY=this.getScrollY(),this.pageLoadScrollX=this.getScrollX(),this.lastApvScrollY=-1,this.lastApvScrollX=-1,this.pageLoadTime=Date.now()},t.prototype.destroy=function(){var t=this;window.removeEventListener("scroll",(function(){t.viewabilityCb()}),!1)},t}();e.ViewabilityHandler=n}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}var o={};return function(){var t=o,e=i(466),n=i(396),r={CustomLoggerCore:e.CustomLoggerCore,CustomLogger:n.CustomLogger,restartSession:function(){r.PSID=function(){for(var t,e=0,i="",o=+new Date;e++<16;)i+=(t=Math.floor(62*Math.random()))<10?t.toString():String.fromCharCode(t<36?t+55:t+61);return i+o.toString(36)}.apply(null)}};void 0!==r.PSID&&r.PSID||r.restartSession(),window.DSCustomLogger=r,t.default=r}(),o.default}()}));